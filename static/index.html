<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ä»€ä¹ˆå€¼å¾—æŠ•</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
  *{box-sizing:border-box}
  body{font-family:'Inter',system-ui,sans-serif;background:#060a14;color:#cbd5e1;overflow-x:hidden}
  /* Animated gradient background */
  body::before{content:'';position:fixed;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(ellipse at 20% 50%,rgba(56,100,220,0.06) 0%,transparent 50%),radial-gradient(ellipse at 80% 20%,rgba(139,92,246,0.04) 0%,transparent 50%),radial-gradient(ellipse at 50% 80%,rgba(14,165,233,0.03) 0%,transparent 50%);z-index:-1;animation:bgShift 20s ease-in-out infinite alternate}
  @keyframes bgShift{0%{transform:translate(0,0)}100%{transform:translate(-3%,2%)}}
  .glass{background:rgba(15,23,42,0.75);backdrop-filter:blur(20px);border:1px solid rgba(148,163,184,0.08)}
  .glass-card{background:linear-gradient(135deg,rgba(15,23,42,0.85),rgba(22,33,56,0.7));backdrop-filter:blur(20px);border:1px solid rgba(148,163,184,0.08)}
  .glass-light{background:rgba(30,42,65,0.5);border:1px solid rgba(100,140,200,0.06)}
  .glow-s{box-shadow:0 0 40px rgba(239,68,68,0.08),0 1px 0 rgba(239,68,68,0.1) inset}
  .glow-a{box-shadow:0 0 35px rgba(249,115,22,0.07),0 1px 0 rgba(249,115,22,0.08) inset}
  .pipeline-step{transition:all 0.5s cubic-bezier(.4,0,.2,1)}
  .pipeline-step.active{transform:scale(1.1)}
  .pipeline-step.done .si{background:linear-gradient(135deg,rgba(34,197,94,0.15),rgba(34,197,94,0.05))!important;border-color:rgba(34,197,94,0.3)!important;box-shadow:0 0 20px rgba(34,197,94,0.15)}
  .pipeline-step.active .si{background:linear-gradient(135deg,rgba(59,130,246,0.2),rgba(139,92,246,0.1))!important;border-color:rgba(96,165,250,0.4)!important;box-shadow:0 0 24px rgba(59,130,246,0.25)}
  .pipeline-step.pending .si{opacity:0.4}
  .score-bar{transition:width 1s cubic-bezier(.4,0,.2,1)}
  .fade-in{animation:fadeIn 0.7s ease forwards;opacity:0}
  @keyframes fadeIn{to{opacity:1;transform:translateY(0)}from{opacity:0;transform:translateY(16px)}}
  @keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}
  .pulse-dot{animation:pulse 1.2s ease-in-out infinite}
  @keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
  .shimmer{background:linear-gradient(90deg,transparent 30%,rgba(255,255,255,0.03) 50%,transparent 70%);background-size:200% 100%;animation:shimmer 3s infinite}
  ::-webkit-scrollbar{width:4px}::-webkit-scrollbar-thumb{background:#1e293b;border-radius:2px}
  .tag-btn{transition:all .25s;cursor:pointer;user-select:none}
  .tag-btn:hover{border-color:rgba(96,165,250,0.3)}
  .tag-btn.active{background:rgba(59,130,246,0.2);border-color:rgba(96,165,250,0.5);color:#93c5fd;box-shadow:0 0 10px rgba(59,130,246,0.1)}
  .hl{color:#f1f5f9;font-weight:700}
  .link{color:#60a5fa;text-decoration:none;border-bottom:1px solid rgba(96,165,250,0.3);transition:all .2s}
  .link:hover{color:#93c5fd;border-color:#93c5fd}
  .tl-dot{width:8px;height:8px;border-radius:50%;background:linear-gradient(135deg,#3b82f6,#8b5cf6);flex-shrink:0;margin-top:5px;box-shadow:0 0 8px rgba(59,130,246,0.4)}
  .tl-line{width:1px;background:linear-gradient(to bottom,rgba(59,130,246,0.4),rgba(30,41,59,0.2));flex-shrink:0}
  .sect{font-size:11px;font-weight:700;color:#64748b;letter-spacing:.03em;display:flex;align-items:center;gap:8px;margin-bottom:10px}
  .sect::before{content:'';width:3px;height:14px;border-radius:2px;background:linear-gradient(to bottom,#3b82f6,#8b5cf6)}
  .metric{background:linear-gradient(135deg,rgba(30,58,100,0.2),rgba(15,23,42,0.4));border:1px solid rgba(59,130,246,0.08);border-radius:8px;padding:8px;text-align:center}
  .contact-box{background:linear-gradient(135deg,rgba(30,58,100,0.25),rgba(22,33,56,0.5));border:1px solid rgba(96,165,250,0.1);border-radius:10px;padding:14px}
  .product-card{background:linear-gradient(135deg,rgba(22,33,56,0.6),rgba(15,23,42,0.8));border:1px solid rgba(100,140,200,0.06);border-radius:10px;overflow:hidden;transition:all .3s}
  .product-card:hover{border-color:rgba(100,140,200,0.15);transform:translateY(-1px)}
  .product-card img{transition:all .4s;filter:brightness(0.95)}
  .product-card:hover img{filter:brightness(1.1)}
</style>
</head>
<body class="min-h-screen">

<!-- Header -->
<header class="border-b border-white/[0.04] px-6 py-5">
  <div class="max-w-7xl mx-auto flex items-center justify-between">
    <div class="flex items-center gap-4">
      <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 flex items-center justify-center text-lg shadow-lg shadow-indigo-500/20 shimmer">ğŸ’°</div>
      <div>
        <h1 class="text-xl font-extrabold text-white tracking-tight">ä»€ä¹ˆå€¼å¾—æŠ•</h1>
        <p class="text-[11px] text-slate-500 mt-0.5">AI å¤šæ™ºèƒ½ä½“å•†æœºå‘æ˜ç³»ç»Ÿ</p>
      </div>
    </div>
    <div id="mode-badge" class="px-3.5 py-1.5 rounded-full text-[11px] font-medium bg-white/[0.03] text-slate-400 border border-white/[0.06]"></div>
  </div>
</header>

<main class="max-w-7xl mx-auto px-6 py-8 space-y-8">

  <!-- Pipeline -->
  <section class="glass rounded-2xl p-7">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-sm font-bold text-white tracking-wide uppercase">Agent æµæ°´çº¿</h2>
      <button id="run-btn" onclick="runPipeline()" class="group px-6 py-2.5 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 text-white text-sm font-bold rounded-xl shadow-lg shadow-indigo-600/25 transition-all disabled:opacity-30 disabled:cursor-not-allowed disabled:shadow-none">
        <span class="group-disabled:hidden">â–¶ è¿è¡Œåˆ†æ</span><span class="hidden group-disabled:inline">â³ è¿è¡Œä¸­...</span>
      </button>
    </div>
    <div id="pipeline-steps" class="flex items-center justify-between gap-1"></div>
    <div id="pipeline-log" class="mt-5 text-xs text-slate-500 h-5 text-center"></div>
  </section>

  <!-- Results -->
  <div id="results" class="hidden space-y-6">
    <div class="grid grid-cols-4 gap-4">
      <div class="glass rounded-2xl p-5 text-center shimmer"><div class="text-3xl font-extrabold text-white" id="stat-total">0</div><div class="text-[11px] text-slate-500 mt-1 font-medium">å‘ç°å•†æœº</div></div>
      <div class="glass rounded-2xl p-5 text-center"><div class="text-3xl font-extrabold text-red-400" id="stat-s">0</div><div class="text-[11px] text-slate-500 mt-1 font-medium">Sçº§ Â· é‡å¤§</div></div>
      <div class="glass rounded-2xl p-5 text-center"><div class="text-3xl font-extrabold text-orange-400" id="stat-a">0</div><div class="text-[11px] text-slate-500 mt-1 font-medium">Açº§ Â· é«˜ä»·å€¼</div></div>
      <div class="glass rounded-2xl p-5 text-center"><div class="text-3xl font-extrabold text-amber-400" id="stat-b">0</div><div class="text-[11px] text-slate-500 mt-1 font-medium">Bçº§ Â· è·Ÿè¸ª</div></div>
    </div>
    <div id="filter-bar" class="glass rounded-2xl px-5 py-3.5 flex items-center gap-2 flex-wrap"></div>
    <div id="opportunity-list" class="space-y-6"></div>
  </div>
</main>

<script>
document.getElementById('pipeline-steps').innerHTML=[
  {a:'crawler',e:'ğŸ•·ï¸',l:'çˆ¬è™«'},{a:'cleaner',e:'ğŸ§¹',l:'æ¸…æ´—'},{a:'integrator',e:'ğŸ§©',l:'æ•´åˆ'},
  {a:'analyst',e:'ğŸ”¬',l:'åˆ†æ'},{a:'evaluator',e:'âš–ï¸',l:'è¯„ä¼°'},{a:'reporter',e:'ğŸ“Š',l:'æŠ¥å‘Š'}
].map((s,i,arr)=>`<div class="pipeline-step pending flex flex-col items-center gap-2.5 flex-1" data-agent="${s.a}"><div class="si w-16 h-16 rounded-2xl bg-white/[0.03] border border-white/[0.06] flex items-center justify-center text-2xl transition-all">${s.e}</div><span class="text-[11px] text-slate-500 font-semibold">${s.l}</span></div>${i<arr.length-1?'<div class="text-slate-700 text-sm">â€º</div>':''}`).join('');

let opps=[],tag='all';
async function init(){const s=await(await fetch('/api/status')).json();const b=document.getElementById('mode-badge');if(s.mode==='mock'){b.textContent='ğŸ§ª Mock';b.classList.add('text-amber-400','border-amber-500/20')}else{b.textContent='ğŸŒ‹ '+s.model;b.classList.add('text-emerald-400','border-emerald-500/20')}if(s.opportunities_count>0)await load()}
async function runPipeline(){const btn=document.getElementById('run-btn');btn.disabled=true;document.getElementById('results').classList.add('hidden');document.querySelectorAll('.pipeline-step').forEach(s=>{s.classList.remove('active','done');s.classList.add('pending')});const es=new EventSource('/api/run'),log=document.getElementById('pipeline-log');
es.addEventListener('agent_start',e=>{const d=JSON.parse(e.data);log.innerHTML=`<span class="pulse-dot text-blue-400">â—</span> ${d.emoji} <span class="text-white/70">${d.agent}</span> æ­£åœ¨è¿è¡Œ <span class="text-slate-600">${d.step}/${d.total}</span>`;const st=document.querySelector(`[data-agent="${d.agent}"]`);if(st){st.classList.remove('pending');st.classList.add('active')}});
es.addEventListener('heartbeat',e=>{const d=JSON.parse(e.data);log.innerHTML=`<span class="pulse-dot text-blue-400">â—</span> <span class="text-white/70">${d.agent}</span> å¤§æ¨¡å‹æ¨ç†ä¸­ <span class="text-blue-400 font-mono">${d.elapsed}s</span>`});
es.addEventListener('agent_done',e=>{const d=JSON.parse(e.data);log.innerHTML=`<span class="text-emerald-400">âœ“</span> ${d.emoji} ${d.agent} <span class="text-slate-600">${d.elapsed}s Â· ${d.output_count}æ¡</span>`;const st=document.querySelector(`[data-agent="${d.agent}"]`);if(st){st.classList.remove('active');st.classList.add('done')}});
es.addEventListener('agent_error',e=>{const d=JSON.parse(e.data);log.innerHTML=`<span class="text-red-400">âœ—</span> ${d.agent}: ${d.error}`;btn.disabled=false;es.close()});
es.addEventListener('pipeline_done',async e=>{const d=JSON.parse(e.data);log.innerHTML=`<span class="text-emerald-400">âœ“</span> å‘ç° <span class="hl">${d.total_opportunities}</span> æ¡å•†æœº`;es.close();btn.disabled=false;await load()});
es.onerror=()=>{es.close();btn.disabled=false}}
async function load(){opps=await(await fetch('/api/opportunities')).json();render()}
function render(){document.getElementById('results').classList.remove('hidden');
document.getElementById('stat-total').textContent=opps.length;
document.getElementById('stat-s').textContent=opps.filter(o=>o.level==='S').length;
document.getElementById('stat-a').textContent=opps.filter(o=>o.level==='A').length;
document.getElementById('stat-b').textContent=opps.filter(o=>o.level==='B').length;
const tags=[...new Set(opps.flatMap(o=>o.industry_tags||[]))];
document.getElementById('filter-bar').innerHTML=`<span class="text-[11px] text-slate-500 font-semibold mr-1">ç­›é€‰</span>`+['å…¨éƒ¨',...tags].map(t=>`<button class="tag-btn px-3 py-1 rounded-full text-[11px] border border-white/[0.06] text-slate-400 ${(t==='å…¨éƒ¨'&&tag==='all')||(t===tag)?'active':''}" onclick="fil('${t==='å…¨éƒ¨'?'all':t}')">${t}</button>`).join('');
cards()}
function fil(t){tag=t;document.querySelectorAll('.tag-btn').forEach(b=>{b.classList.toggle('active',b.textContent===t||(t==='all'&&b.textContent==='å…¨éƒ¨'))});cards()}
function cards(){const f=tag==='all'?opps:opps.filter(o=>(o.industry_tags||[]).includes(tag));document.getElementById('opportunity-list').innerHTML=f.map((o,i)=>card(o,i)).join('');f.forEach((o,i)=>radar(`r${i}`,o.radar_data||o.scores))}

// helpers
function B(t){if(!t)return'';return String(t).replace(/(\d[\d,]*\.?\d*\s*(äº¿|ä¸‡|åƒä¸‡|ç™¾ä¸‡|ç¾å…ƒ|å…ƒ|äººæ°‘å¸|%|USD|RMB|Stars?))/g,'<span class="hl">$1</span>').replace(/(å‰[^\s,ï¼Œã€‚ã€]{1,15}(è´Ÿè´£äºº|ç ”ç©¶å‘˜|å·¥ç¨‹å¸ˆ|æ€»ç›‘|VP|CTO|CEO|COO|æ€»è£|ä¸»ä»»|ç»ç†|ç§‘å­¦å®¶))/g,'<span class="hl">$1</span>').replace(/(æ¸…å|åŒ—å¤§|æ–¯å¦ç¦|CMU|MIT|å“ˆä½›|Google Brain|OpenAI|DeepMind|Meta AI|å­—èŠ‚è·³åŠ¨|é˜¿é‡Œ[äº‘å·´]?|è…¾è®¯|ç™¾åº¦|åä¸º)/g,'<span class="hl">$1</span>')}
function st(s){if(!s)return'';const c=s>=9?'text-emerald-400':s>=7?'text-blue-400':s>=5?'text-amber-400':'text-slate-500';return`<span class="${c} text-[10px] font-mono font-bold">${s}</span>`}

function card(o,i){
  const cp=o.company_profile||{},fl=o.funding_logic||{},fp=o.founder_profile||{},ct=o.core_tech||{},tm=o.star_team||{},pt=o.potential||{},im=o.industry_impact||{},sc=o.scores||{},co=cp.contact||{};
  const lc={S:'border-red-500/20',A:'border-orange-500/15',B:'border-amber-500/10',C:'border-slate-600/20'};
  const lb={S:'from-red-600 to-rose-600',A:'from-orange-600 to-amber-600',B:'from-amber-600 to-yellow-600',C:'from-slate-600 to-slate-500'};
  const gw=o.level==='S'?'glow-s':o.level==='A'?'glow-a':'';
  const cn=cp.name||'';
  const cl=cp.website_url?`<a href="${cp.website_url}" target="_blank" class="link font-bold">${cn}</a>`:cn;
  const cpn=co.name||fp.name||cn;

  return`
  <div class="glass-card rounded-2xl border ${lc[o.level]||''} ${gw} overflow-hidden fade-in" style="animation-delay:${i*.12}s">
    <!-- Header -->
    <div class="p-7 pb-5">
      <div class="flex items-center gap-3 mb-4">
        <span class="px-3.5 py-1 rounded-lg text-xs font-extrabold text-white bg-gradient-to-r ${lb[o.level]||''} shadow-sm">${o.level}çº§</span>
        <span class="text-2xl font-extrabold text-white">${sc.total||'?'}</span>
        <span class="text-xs text-slate-600">/10</span>
        ${o.special_tag?`<span class="px-2.5 py-0.5 rounded-lg text-[11px] bg-white/[0.04] text-slate-300 border border-white/[0.06] font-medium">${o.special_tag}</span>`:''}
      </div>
      <h3 class="text-lg font-extrabold text-white leading-snug mb-2">${o.title||''}</h3>
      <p class="text-[13px] text-slate-400 leading-relaxed">${o.one_line_verdict||''}</p>
      <div class="flex flex-wrap gap-1.5 mt-3">
        ${(o.industry_tags||[]).map(t=>`<span class="px-2.5 py-0.5 rounded-full text-[10px] bg-gradient-to-r from-blue-500/10 to-indigo-500/10 text-blue-300 border border-blue-500/15 font-medium">${t}</span>`).join('')}
      </div>
    </div>

    <div class="px-7 pb-7 grid grid-cols-2 gap-7">
      <!-- LEFT -->
      <div class="space-y-6">
        <!-- Company -->
        <div>
          <div class="sect">å…¬å¸æ¦‚å†µ ${st(sc.company)}</div>
          <p class="text-[13px] text-white font-bold mb-1.5">${cl}</p>
          <p class="text-slate-400 text-xs leading-relaxed">${B(cp.what_they_do)}</p>
          ${(cp.product_lines||[]).length?`
          <div class="mt-4 space-y-3">
            <div class="text-[10px] text-slate-500 font-bold uppercase tracking-widest">äº§å“çº¿</div>
            ${(cp.product_lines||[]).map(p=>typeof p==='object'?`
            <div class="product-card">
              ${p.screenshot_url?`<img src="${p.screenshot_url}" class="w-full h-36 object-cover" alt="${p.name||''}" onerror="this.style.display='none'" loading="lazy">`:''}
              <div class="p-3.5">
                <div class="text-xs text-white font-bold mb-1">${p.name||''}</div>
                <div class="text-[11px] text-slate-400 leading-relaxed">${B(p.description||'')}</div>
                ${p.metrics?metrics(p.metrics):''}
              </div>
            </div>`:'').join('')}
          </div>`:''}
          <div class="mt-3 text-[10px] text-slate-600">å•†ä¸šæ¨¡å¼: <span class="text-slate-500">${cp.business_model||'-'}</span></div>
        </div>

        <!-- Funding -->
        <div>
          <div class="sect">èèµ„è¯¦æƒ… ${st(sc.funding)}</div>
          <div class="flex items-center gap-2 mb-2.5">
            <span class="px-2.5 py-0.5 bg-gradient-to-r from-blue-500/10 to-indigo-500/10 text-blue-300 rounded-lg text-[11px] font-bold border border-blue-500/15">${fl.current_round||fl.round||'?'}</span>
            <span class="text-sm hl">${fl.current_amount||fl.amount||'?'}</span>
            ${fl.lead_investor?`<span class="text-[10px] text-slate-500">é¢†æŠ• <span class="text-slate-400 font-medium">${fl.lead_investor}</span></span>`:''}
          </div>
          <p class="text-slate-400 text-xs leading-relaxed mb-3">${B(fl.why_fundable)}</p>
          ${(fl.funding_history||[]).length?`
          <div class="text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-2">èèµ„å†ç¨‹</div>
          <div class="flex gap-3">
            <div class="flex flex-col items-center pt-0.5">${(fl.funding_history||[]).map((_,i,a)=>`<div class="tl-dot"></div>${i<a.length-1?'<div class="tl-line flex-1 min-h-[22px]"></div>':''}`).join('')}</div>
            <div class="space-y-3 flex-1">${(fl.funding_history||[]).map(h=>`<div class="text-[11px]"><span class="text-blue-300 font-bold">${h.round}</span> <span class="hl ml-1">${h.amount}</span> <span class="text-slate-600 ml-1">${h.date||''}</span><div class="text-slate-500 mt-0.5">${(h.investors||[]).join(' Â· ')}${h.lead?' <span class="text-slate-400">(é¢†æŠ•:'+h.lead+')</span>':''}</div></div>`).join('')}</div>
          </div>`:`<div class="text-[11px] text-slate-500">æŠ•èµ„æ–¹: ${(fl.investors||[]).join(' Â· ')}</div>`}
          ${fl.investor_signal?`<div class="text-[10px] text-slate-500 mt-3 italic border-l-2 border-indigo-500/30 pl-3">${fl.investor_signal}</div>`:''}
        </div>

        <!-- Founder -->
        <div>
          <div class="sect">åˆ›å§‹äºº ${st(sc.founder)}</div>
          <p class="text-[13px] text-white font-bold">${fp.name||'æœªçŸ¥'}</p>
          <p class="text-xs text-slate-400 mt-1 leading-relaxed">${B(fp.background_summary)}</p>
          ${(fp.highlights||[]).length?`<div class="mt-2 space-y-1">${(fp.highlights||[]).map(h=>`<div class="text-[11px] text-slate-400 flex gap-2"><span class="text-blue-400/50 shrink-0">â–¹</span><span>${B(h)}</span></div>`).join('')}</div>`:''}
        </div>

        <!-- Tech -->
        <div>
          <div class="sect">æ ¸å¿ƒæŠ€æœ¯ ${st(sc.tech)}</div>
          ${ct.has_papers?'<div class="text-[11px] text-emerald-400 mb-2 font-medium">ğŸ“„ æœ‰æ ¸å¿ƒè®ºæ–‡</div>':''}
          <div class="space-y-1.5">
            ${(ct.papers||ct.key_papers||[]).map(p=>typeof p==='object'?`<div class="text-[11px] text-slate-400 flex gap-2"><span class="text-blue-400/50 shrink-0">â–¹</span><span>${p.url?`<a href="${p.url}" target="_blank" class="link">${p.title||'è®ºæ–‡'}</a>`:p.title||''} <span class="text-slate-600">${p.venue||''} ${p.citations?'å¼•ç”¨:'+p.citations:''}</span></span></div>`:`<div class="text-[11px] text-slate-400">â–¹ ${p}</div>`).join('')}
            ${(ct.open_source_projects||ct.open_source||[]).map(p=>typeof p==='object'?`<div class="text-[11px] text-slate-400 flex gap-2"><span class="text-emerald-400/50 shrink-0">â–¹</span><span>ğŸ”“ ${p.url?`<a href="${p.url}" target="_blank" class="link">${p.name}</a>`:p.name} ${p.stars?`<span class="hl">â­${p.stars}</span>`:''}</span></div>`:'').join('')}
          </div>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="space-y-6">
        <div class="glass-light rounded-xl p-4"><canvas id="r${i}" width="300" height="240"></canvas></div>

        <!-- Potential -->
        <div>
          <div class="sect">å¸‚åœºæ½œåŠ› ${st(sc.potential)}</div>
          <div class="flex gap-2 mb-2">
            <span class="px-2.5 py-0.5 rounded-lg text-[10px] font-bold border ${pt.potential_rating==='high'?'bg-emerald-500/10 text-emerald-300 border-emerald-500/15':pt.potential_rating==='medium'?'bg-amber-500/10 text-amber-300 border-amber-500/15':'bg-white/[0.03] text-slate-400 border-white/[0.06]'}">${pt.potential_rating||'?'}</span>
            <span class="px-2.5 py-0.5 bg-white/[0.03] rounded-lg text-[10px] text-slate-400 border border-white/[0.06]">${pt.moat_type||'?'}</span>
          </div>
          <p class="text-xs text-slate-400 leading-relaxed">${B(pt.reasoning)}</p>
          <p class="text-[10px] text-slate-500 mt-1.5">${B(pt.market_size)}</p>
        </div>

        <!-- Impact -->
        <div>
          <div class="sect">è¡Œä¸šå½±å“ ${st(sc.impact)}</div>
          <div class="flex gap-2 mb-2">
            <span class="px-2.5 py-0.5 rounded-lg text-[10px] font-bold border ${im.scope==='é¢ è¦†æ€§'?'bg-red-500/10 text-red-300 border-red-500/15':im.scope==='é‡å¤§'?'bg-orange-500/10 text-orange-300 border-orange-500/15':'bg-white/[0.03] text-slate-400 border-white/[0.06]'}">${im.scope||'?'}</span>
            <span class="text-[10px] text-slate-500">${im.timeline||''}</span>
          </div>
          <p class="text-xs text-slate-400 leading-relaxed">${B(im.how_it_changes)}</p>
        </div>

        <!-- Team -->
        <div>
          <div class="sect">æ ¸å¿ƒå›¢é˜Ÿ ${st(sc.team)}</div>
          ${tm.is_star_team?'<div class="text-[11px] text-amber-400 font-bold mb-2">â­ æ˜æ˜Ÿå›¢é˜Ÿ</div>':''}
          ${(tm.key_members||[]).length?`<div class="space-y-2">${(tm.key_members||[]).map(m=>`<div class="glass-light rounded-lg px-3.5 py-2.5"><div class="flex items-center gap-2"><span class="text-xs text-white font-bold">${m.name}</span><span class="text-[10px] text-indigo-300 font-medium">${m.role||''}</span></div><div class="text-[10px] text-slate-400 mt-0.5">${B(m.background||'')}</div></div>`).join('')}</div>`:
          `<div class="space-y-1">${(tm.signals||[]).map(s=>`<div class="text-[11px] text-slate-400">â–¹ ${B(s)}</div>`).join('')}</div>`}
        </div>

        <!-- Scores -->
        <div class="glass-light rounded-xl p-4">
          <div class="text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-3">è¯„åˆ†</div>
          ${bars(sc)}
        </div>

        <!-- Contact -->
        <div class="contact-box">
          <div class="text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-3">ğŸ“‡ è”ç³»äºº</div>
          <div class="flex items-center gap-2.5 mb-2">
            <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-500/20 to-indigo-500/20 border border-blue-500/20 flex items-center justify-center text-sm">${(cpn||'?')[0]}</div>
            <div>
              <div class="text-xs text-white font-bold">${cpn}</div>
              <div class="text-[10px] text-slate-500">${fp.rating==='strong'?'æ ¸å¿ƒå†³ç­–äºº':'åˆ›å§‹äºº'}</div>
            </div>
          </div>
          ${fp.highlights&&fp.highlights[0]?`<div class="text-[10px] text-slate-400 mb-2 pl-[42px]">${B(fp.highlights[0])}</div>`:''}
          <div class="space-y-1.5 pl-[42px]">
            ${co.email?`<div class="text-[11px] text-slate-300">ğŸ“§ <a href="mailto:${co.email}" class="link">${co.email}</a></div>`:''}
            ${co.phone?`<div class="text-[11px] text-slate-300">ğŸ“ <span class="hl">${co.phone}</span></div>`:''}
            ${co.wechat?`<div class="text-[11px] text-slate-300">ğŸ’¬ ${co.wechat}</div>`:''}
            ${cp.website_url?`<div class="text-[11px] text-slate-300">ğŸŒ <a href="${cp.website_url}" target="_blank" class="link">${cp.website_url}</a></div>`:''}
            ${!co.email&&!co.phone&&!co.wechat&&!cp.website_url?`<div class="text-[10px] text-slate-600 italic">æš‚æ— å…¬å¼€è”ç³»æ–¹å¼</div>`:''}
          </div>
        </div>
      </div>
    </div>

    <!-- Extra images -->
    ${(o.extra_images||[]).length?`
    <div class="px-7 pb-6">
      <div class="text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-3">ğŸ“¸ ç›¸å…³å›¾ç‰‡</div>
      <div class="grid grid-cols-3 gap-3">${(o.extra_images||[]).map(img=>`
        <div class="relative group rounded-xl overflow-hidden cursor-pointer">
          <img src="${img.url}" class="w-full h-32 object-cover brightness-90 group-hover:brightness-110 group-hover:scale-105 transition-all duration-500" alt="${img.title||''}" onerror="this.parentElement.style.display='none'" loading="lazy">
          <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
          <div class="absolute bottom-0 left-0 right-0 px-3 py-2 translate-y-full group-hover:translate-y-0 transition-transform duration-300">
            <div class="text-[10px] text-white font-medium truncate">${img.title||''}</div>
          </div>
          ${img.source_url?`<a href="${img.source_url}" target="_blank" class="absolute inset-0"></a>`:''}</div>`).join('')}
      </div>
    </div>`:''}
  </div>`;
}

function metrics(m){if(!m)return'';const items=[m.users&&!/æœª|å°š/.test(m.users)?['ç”¨æˆ·',m.users]:null,m.dau&&!/æœª|å°š/.test(m.dau)?['DAU',m.dau]:null,m.wau&&!/æœª|å°š/.test(m.wau)?['WAU',m.wau]:null,m.retention&&!/æœª|å°š/.test(m.retention)?['ç•™å­˜',m.retention]:null,m.mrr&&!/æœª|å°š/.test(m.mrr)?['MRR',m.mrr]:null,m.arr&&!/æœª|å°š/.test(m.arr)?['ARR',m.arr]:null].filter(Boolean);if(!items.length)return'';return`<div class="mt-2.5 grid grid-cols-3 gap-1.5">${items.map(([k,v])=>`<div class="metric"><div class="text-[9px] text-slate-500 font-medium">${k}</div><div class="text-[10px] hl mt-0.5">${v}</div></div>`).join('')}</div>`}

function bars(sc){return[{k:'company',l:'å…¬å¸'},{k:'potential',l:'æ½œåŠ›'},{k:'impact',l:'å½±å“'},{k:'funding',l:'èèµ„'},{k:'founder',l:'åˆ›å§‹äºº'},{k:'tech',l:'æŠ€æœ¯'},{k:'team',l:'å›¢é˜Ÿ'}].map(d=>{const v=sc[d.k]||0,p=v*10,c=v>=9?'from-emerald-500 to-teal-500':v>=7?'from-blue-500 to-indigo-500':v>=5?'from-amber-500 to-orange-500':'from-slate-500 to-slate-600';return`<div class="flex items-center gap-2 mb-2"><span class="text-[10px] text-slate-500 w-10 shrink-0 font-medium">${d.l}</span><div class="flex-1 h-1.5 bg-white/[0.03] rounded-full overflow-hidden"><div class="h-full bg-gradient-to-r ${c} rounded-full score-bar" style="width:${p}%"></div></div><span class="text-[10px] text-slate-400 w-4 text-right font-mono font-bold">${v}</span></div>`}).join('')}

function radar(id,data){const c=document.getElementById(id);if(!c)return;const l=data.labels||['å…¬å¸','æ½œåŠ›','å½±å“','èèµ„','åˆ›å§‹äºº','æŠ€æœ¯','å›¢é˜Ÿ'];const v=data.values||[data.company||5,data.potential||5,data.impact||5,data.funding||5,data.founder||5,data.tech||5,data.team||5];new Chart(c,{type:'radar',data:{labels:l,datasets:[{data:v,backgroundColor:'rgba(99,102,241,0.1)',borderColor:'rgba(129,140,248,0.6)',borderWidth:2,pointBackgroundColor:'rgba(129,140,248,0.9)',pointRadius:4,pointBorderColor:'#060a14',pointBorderWidth:2}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{r:{min:0,max:10,ticks:{stepSize:2,display:false},grid:{color:'rgba(148,163,184,0.05)'},angleLines:{color:'rgba(148,163,184,0.05)'},pointLabels:{color:'#94a3b8',font:{size:11,weight:'600'}}}}}})}

init();
</script>
</body>
</html>
