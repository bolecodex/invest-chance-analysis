# 什么值得投 — 多智能体系统技术架构

> 聚焦领域：**云计算 & AI 赛道商机**

## 一、系统总览

```
┌─────────────────────────────────────────────────────────────────────────┐
│                            前端 (Web UI)                                │
│    仪表盘 · 商机看板 · 人工审核台 · 文章库 · 图文报告中心                  │
└───────────────────────────────┬─────────────────────────────────────────┘
                                │ REST / WebSocket
┌───────────────────────────────▼─────────────────────────────────────────┐
│                        后端网关 (Gateway)                                │
│            OpenClaw Gateway · 路由分发 · 会话管理 · 审批流                │
└──┬────────┬────────┬────────┬────────┬────────┬────────────────────────┘
   │        │        │        │        │        │
   ▼        ▼        ▼        ▼        ▼        ▼
┌──────┐┌──────┐┌──────┐┌──────┐┌──────┐┌────────────┐
│ 爬虫 ││ 清洗 ││ 整合 ││ 分析 ││ 评估 ││  报告生成   │
│Agent ││Agent ││Agent ││Agent ││Agent ││  Agent     │
└──┬───┘└──┬───┘└──┬───┘└──┬───┘└──┬───┘└────┬───────┘
   │       │       │       │       │         │
   ▼       ▼       ▼       ▼       ▼         ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                        工具层 (MCP + Skills)                            │
│  wechat-exporter · LLM Task · Web Tools · Browser · 数据库 · 搜索引擎   │
└─────────────────────────────────────────────────────────────────────────┘
                                │
                   ┌────────────┼────────────┐
                   ▼            ▼            ▼
             ┌──────────┐┌──────────┐┌────────────┐
             │PostgreSQL││  Redis   ││Meilisearch │
             └──────────┘└──────────┘└────────────┘
```

---

## 二、核心组件详解

### 2.1 数据采集层 — 微信文章爬虫

**技术选型**：基于 [wechat-article-exporter](https://github.com/wechat-article/wechat-article-exporter)

该项目是一个成熟的微信公众号文章批量下载工具（Nuxt.js 全栈应用），核心原理是利用微信公众号后台"写文章时搜索其他公众号文章"的接口来抓取文章。

**集成方式**：

| 方案 | 说明 | 推荐度 |
|------|------|--------|
| Docker 私有化部署 | 将 wechat-article-exporter 以 Docker 容器部署，通过其开放 API 接口获取文章数据 | ⭐⭐⭐ 推荐 |
| API 直接调用 | 研究其 `server/` 和 `apis/` 目录，提取核心 API 封装为独立微服务 | ⭐⭐ 备选 |
| 浏览器自动化 | 通过 OpenClaw 的 Browser 工具操控其在线站点 | ⭐ 应急 |

**目标公众号示例（云 & AI 赛道）**：
- 云厂商官方：AWS 中国、Azure 中国、阿里云、腾讯云、华为云
- AI 行业媒体：机器之心、量子位、AI科技评论、新智元
- 综合科技：36氪、虎嗅、极客公园、InfoQ
- 投融资：投资界、创业邦、IT桔子、亿欧

**采集流程**：
1. 管理员在前端配置目标公众号列表
2. 系统通过 wechat-article-exporter 的 API 定时批量拉取文章
3. 支持导出 HTML/JSON 格式，HTML 可 100% 还原排版
4. 文章数据（标题、正文、作者、发布时间、阅读量、评论等）存入数据库
5. 通过 Redis 缓存文章列表，减少重复请求

---

### 2.2 多智能体层 — OpenClaw 架构

**技术选型**：[OpenClaw](https://openclaw.ai)（原 MoltBot/ClawdBot）

OpenClaw 是一个对话优先的 AI Agent 框架，本地运行，支持多智能体协调。选择它的原因：

- **Gateway 架构**：单一长生命周期的 Gateway 进程管理所有消息通道，通过 WebSocket 提供类型化 API
- **多 Agent 路由**：原生支持多 Agent 协作，Agent 间通过 `Agent Send` 工具通信
- **Skills 系统**：通过 `SKILL.md` 文件扩展功能，支持自定义技能
- **MCP 协议支持**：可接入 MCP 工具服务器，扩展 Agent 能力边界
- **OpenProse 工作流**：markdown-first 的工作流编排格式，支持多 Agent 并行研究

#### 六大核心 Agent + 人工审核节点

```
                       ┌─────────────────┐
                       │  Orchestrator   │  ← 编排者（Gateway 路由）
                       │  (协调调度中心)   │
                       └────────┬────────┘
                                │ Agent Send
   ┌────────┬───────────┬───────┼───────┬──────────┬────────────┐
   ▼        ▼           ▼       ▼       ▼          ▼            ▼
┌──────┐┌───────┐┌──────────┐┌──────┐┌──────┐┌─────────┐┌──────────┐
│Crawl ││Clean  ││Integrator││Analy ││Evalu ││ Human   ││Reporter  │
│Agent ││Agent  ││Agent     ││Agent ││Agent ││ Review  ││Agent     │
│爬虫  ││清洗   ││信息整合   ││分析  ││评估  ││ 人工审核 ││报告生成  │
└──────┘└───────┘└──────────┘└──────┘└──────┘└─────────┘└──────────┘
                                                 ↑
                                          前端审核界面
                                        （简洁交互设计）
```

---

#### Agent 1：Crawler Agent（爬虫智能体）

**职责**：管理微信文章的采集任务

**工作空间**：`~/.openclaw/workspace-crawler/`

**IDENTITY.md**：
```markdown
name: Crawler
emoji: 🕷️
theme: data collector
```

**绑定 Skills**：
- `wechat-crawler` — 封装 wechat-article-exporter API 调用
- `rss-reader` — 扩展支持 RSS 源采集
- `schedule` — 定时采集任务管理

**绑定 MCP 工具**：
- 数据库 MCP Server — 将采集到的原始文章写入 PostgreSQL
- 消息队列 MCP Server — 采集完成后通知下游 Agent

**工作流**：
1. 按配置的公众号列表和采集频率执行定时任务（Cron Jobs）
2. 调用 wechat-article-exporter API 拉取文章列表
3. 增量检查，跳过已采集文章
4. 下载文章全文（HTML + 元数据）
5. 存储原始数据到 `raw_articles` 表
6. 通过 Agent Send 通知 Cleaner Agent 有新文章待处理

---

#### Agent 2：Cleaner Agent（清洗智能体 — 投融资 & 云 AI 聚焦）

**职责**：文章内容清洗与结构化，**特别关注投融资信息的提取**，侧重云计算和 AI 领域的商业信号

**工作空间**：`~/.openclaw/workspace-cleaner/`

**IDENTITY.md**：
```markdown
name: CloudAI Cleaner
emoji: 🧹
theme: funding and cloud-AI signal extractor
```

**绑定 Skills**：
- `html-parser` — HTML 正文提取、去除广告和无关内容
- `cloud-ai-classifier` — 云 & AI 领域专用分类器（见下方详细说明）
- `funding-extractor` — 🆕 投融资信息专项提取（融资轮次、金额、投资方、估值、创始人背景）
- `entity-extractor` — 领域实体抽取（产品名、技术栈、厂商名、服务类型）

**绑定 MCP 工具**：
- LLM Task（OpenClaw 内置）— 调用大模型进行领域内容理解
- Web Tools（OpenClaw 内置）— 补充抓取文章中引用的外部链接信息
- 🆕 **投融资数据 MCP Server** — 对接 IT桔子/天眼查/企查查 等数据源，自动补充融资详情
- 🆕 **学术搜索 MCP Server** — 对接 Semantic Scholar / Google Scholar，查询创始人/团队论文

**云 & AI 领域专用分类体系**：

```
┌──────────────────────────────────────────────────────────────────┐
│                  cloud-ai-classifier 分类维度                     │
├──────────────┬───────────────────────────────────────────────────┤
│              │                                                   │
│  一级分类     │  云计算 │ AI/ML │ 大模型 │ 数据服务 │ 云安全       │
│              │  边缘计算 │ AI 应用 │ AI 基础设施 │ 混合          │
│              │                                                   │
├──────────────┼───────────────────────────────────────────────────┤
│              │                                                   │
│  信号类型     │  ⭐ 融资事件 — 完成融资/IPO/战略投资（最高优先级）   │
│              │  ⭐ 并购合作 — 收购/战略合作/合并                    │
│              │  产品发布  — 新产品/新功能上线                      │
│              │  价格变动  — 降价/提价/新计费模式                    │
│              │  客户案例  — 标杆客户/大单签约                      │
│              │  技术突破  — 新模型/新架构/新论文商业化               │
│              │  人事变动  — 关键高管变动/核心团队组建                │
│              │  政策监管  — 政策/合规/标准变化                      │
│              │  市场格局  — 份额变化/排名变动/行业报告               │
│              │                                                   │
├──────────────┼───────────────────────────────────────────────────┤
│              │                                                   │
│  投融资专项   │  公司名称 + 所属赛道                                │
│  信息提取     │  融资轮次: 天使/Pre-A/A/B/C/.../Pre-IPO/IPO       │
│  ⭐ 重点      │  融资金额 + 货币单位                               │
│              │  投资方/领投方/跟投方                               │
│              │  估值（如有）                                       │
│              │  创始人/CEO 姓名 + 背景线索                         │
│              │  公司核心业务描述                                    │
│              │  团队规模/技术团队背景线索                           │
│              │                                                   │
├──────────────┼───────────────────────────────────────────────────┤
│              │                                                   │
│  通用实体     │  厂商: AWS / Azure / 阿里云 / 腾讯云 / ...         │
│  抽取        │  产品: EC2 / GPT-4o / 通义千问 / ...               │
│              │  技术: Transformer / RAG / Serverless / K8s / ...  │
│              │  金额: 融资金额 / 合同金额 / 市场规模                │
│              │  人物: CEO / CTO / 首席科学家                       │
│              │                                                   │
└──────────────┴───────────────────────────────────────────────────┘
```

**工作流**：
1. 接收 Crawler Agent 的通知
2. 从数据库读取原始文章 HTML
3. 提取纯文本正文、关键段落、图表数据
4. 按分类体系进行多标签分类
5. **投融资信息专项提取**（最高优先级）：
   - LLM 识别文章中的融资/并购事件
   - 提取融资轮次、金额、投资方、估值等结构化字段
   - 提取创始人/CEO 姓名及文中提到的任何背景线索
   - 如果文章中投融资字段不完整，**立即调用投融资数据 MCP** 查询 IT桔子/天眼查补充
6. 领域实体抽取（厂商、产品、技术栈、金额、人物）
7. 生成面向云/AI + 投融资视角的结构化摘要
8. 标注信息完整度评分（completeness_score）：判断关键字段是否提取完整
9. 结构化数据存入 `cleaned_articles` 表
10. 通过 Agent Send 通知 Integrator Agent，**附带信息完整度评分**

**信息完整度评分规则**：
```
completeness_score 计算（投融资信息权重最高）：

  ── 投融资核心信息（权重 50%）──
  - 有公司名称 + 核心业务描述     +0.10
  - 有融资轮次和金额              +0.10
  - 有投资方/领投方信息            +0.08
  - 有创始人姓名 + 背景信息        +0.08
  - 有团队信息（规模/核心成员背景）  +0.07
  - 有核心技术/论文/专利线索        +0.07

  ── 市场与产品信息（权重 30%）──
  - 有具体产品/服务名称            +0.08
  - 有市场规模/增长率数据          +0.07
  - 有竞品对比信息                +0.08
  - 有客户/落地案例                +0.07

  ── 基础信息（权重 20%）──
  - 有明确时间节点                +0.10
  - 有行业分类和标签              +0.10

  ≥ 0.7 → 信息充分，可直接进入分析
  < 0.7 → 信息不完整，需要 Integrator Agent 补充
```

---

#### Agent 3：Integrator Agent（信息整合智能体）🆕

**职责**：当 Cleaner Agent 提取的信息不完整时，主动从多个来源补充缺失信息，拼合出完整的商机拼图

**工作空间**：`~/.openclaw/workspace-integrator/`

**IDENTITY.md**：
```markdown
name: Integrator
emoji: 🧩
theme: information gap filler
```

**绑定 Skills**：
- `gap-analyzer` — 分析信息缺口，确定需要补充的维度
- `web-researcher` — 多源信息搜索与验证
- `cross-reference` — 多篇文章交叉引用、信息融合
- `cloud-ai-knowledge` — 云 & AI 领域知识库（厂商产品线、技术体系、市场格局）
- 🆕 `founder-profiler` — 创始人/核心团队背景调研

**绑定 MCP 工具**：
- LLM Task — 信息推理与合成
- Web Tools — 互联网搜索补充信息
- Browser（OpenClaw 内置）— 访问特定网站抓取补充数据
- 搜索引擎 MCP Server — 检索历史文章库找关联信息
- 🆕 **投融资数据 MCP Server** — 对接 IT桔子/天眼查/企查查，补充融资轮次、金额、投资方、公司背景
- 🆕 **学术搜索 MCP Server** — 对接 Semantic Scholar / Google Scholar / DBLP，查询核心团队论文发表
- 🆕 **企业信息 MCP Server** — 对接天眼查/企查查，查询公司注册信息、股东结构、核心团队

**信息补充策略（投融资信息最高优先级）**：

```
┌─────────────────────────────────────────────────────────────────────┐
│              Integrator 补充策略矩阵（投融资优先）                     │
├─────────────────┬───────────────────────────────────────────────────┤
│                 │                                                   │
│ ⭐ 缺失融资详情  │ 1. 投融资数据 MCP → IT桔子查询公司最新融资记录      │
│ （最高优先级）   │ 2. 天眼查 MCP → 工商变更记录推断融资情况            │
│                 │ 3. Web 搜索 → 搜索 "公司名+融资" 找其他报道          │
│                 │ 4. 历史文章库 → 查找同公司此前融资报道                │
│                 │                                                   │
├─────────────────┼───────────────────────────────────────────────────┤
│                 │                                                   │
│ ⭐ 缺失创始人    │ 1. 企业信息 MCP → 天眼查查询法人/高管信息           │
│    背景         │ 2. Web 搜索 → LinkedIn / 百度百科 / 36氪人物页      │
│                 │ 3. 学术搜索 MCP → 查询创始人论文发表记录             │
│                 │ 4. 历史文章库 → 查找人物专访/团队报道                 │
│                 │                                                   │
├─────────────────┼───────────────────────────────────────────────────┤
│                 │                                                   │
│ ⭐ 缺失核心技术  │ 1. 学术搜索 MCP → 搜索团队核心成员论文              │
│    /论文信息    │ 2. Web 搜索 → GitHub 开源项目、技术博客              │
│                 │ 3. Browser → 访问公司官网技术页面                    │
│                 │ 4. 专利搜索 → 查询公司/创始人名下专利                │
│                 │                                                   │
├─────────────────┼───────────────────────────────────────────────────┤
│                 │                                                   │
│ 缺失公司业务     │ 1. Browser → 访问公司官网提取产品描述               │
│ 详情            │ 2. 投融资数据 MCP → IT桔子公司简介                  │
│                 │ 3. 历史文章库 → 查找产品评测/客户案例文章             │
│                 │                                                   │
├─────────────────┼───────────────────────────────────────────────────┤
│                 │                                                   │
│ 缺失团队信息     │ 1. 企业信息 MCP → 股东和高管列表                    │
│                 │ 2. Web 搜索 → 招聘网站推断团队规模和方向             │
│                 │ 3. 学术搜索 MCP → 核心成员学术背景和引用量            │
│                 │                                                   │
├─────────────────┼───────────────────────────────────────────────────┤
│                 │                                                   │
│ 缺失市场/竞品    │ 1. 搜索 Gartner/IDC/信通院 等分析报告              │
│                 │ 2. 从知识库获取同赛道厂商列表                       │
│                 │ 3. 汇总多篇文章的市场描述                           │
│                 │                                                   │
└─────────────────┴───────────────────────────────────────────────────┘
```

**工作流**：
1. 接收 Cleaner Agent 的结构化数据 + 信息完整度评分
2. **分流判断**：
   - `completeness_score ≥ 0.7` → 信息充分，直接转发给 Analyst Agent
   - `completeness_score < 0.7` → 进入信息补充流程
3. 对不完整的条目，运行 `gap-analyzer` 识别具体缺失维度
4. 按优先级执行补充策略：
   - 优先：搜索本地历史文章库（成本低、速度快）
   - 其次：搜索互联网公开信息
   - 最后：通过 Browser 访问特定数据源网站
5. **交叉引用**：将多篇相关文章的信息融合，拼合出更完整的画面
6. 更新 `cleaned_articles` 表，补充缺失字段，标注信息来源（source_type: original / supplemented）
7. 重新计算完整度评分，记录补充前后的变化
8. 通过 Agent Send 将补充完整的数据推送给 Analyst Agent

**去重与融合逻辑**：
```
同一事件（如"某公司完成融资"）可能出现在多篇文章中：
  1. 按 事件指纹（厂商+事件类型+时间窗口）聚合相关文章
  2. 从不同文章中取各自最丰富的字段
  3. 冲突信息标记 conflict=true，保留全部版本供人工裁决
  4. 输出一条融合后的"综合信息卡"作为分析输入
```

---

#### Agent 4：Analyst Agent（分析智能体 — 云 & AI 商机专精）

**职责**：**专注分析云计算和 AI 业务相关的商机**，从整合后的信息中提炼可行动的商业洞察

**工作空间**：`~/.openclaw/workspace-analyst/`

**IDENTITY.md**：
```markdown
name: CloudAI Analyst
emoji: 🔬
theme: cloud and AI business opportunity analyst
```

**绑定 Skills**：
- `cloud-opportunity-detector` — 云计算赛道商机识别模型
- `ai-opportunity-detector` — AI 赛道商机识别模型
- `competitive-landscape` — 云 & AI 市场竞争格局分析
- `tech-trend-tracker` — 技术趋势与产品周期追踪

**绑定 MCP 工具**：
- LLM Task — 深度推理商机价值
- Web Tools — 在线搜索补充信息（验证商机可靠性）
- 搜索引擎 MCP Server — 全文检索已有商机库，避免重复

**云 & AI 专属商机识别模型**：

```
┌──────────────────────────────────────────────────────────────────────┐
│                    云 & AI 商机识别模型                                │
├──────────┬───────────────────────────────────────────────────────────┤
│          │                                                           │
│ 云计算   │ 1. IaaS 格局变化  → 云厂商市场份额增减、新区域开服            │
│ 商机类型 │ 2. PaaS 新品机会  → 新数据库/中间件/容器服务发布              │
│          │ 3. SaaS 赛道窗口  → 垂直 SaaS 融资、国产替代机会            │
│          │ 4. 混合云/多云    → 企业多云策略变化、迁移需求               │
│          │ 5. 云安全         → 新合规要求、安全事件驱动的需求           │
│          │ 6. 降本增效       → 云成本优化、FinOps 工具机会              │
│          │ 7. 出海/回归      → 云服务出海或海外云入华机会               │
│          │                                                           │
├──────────┼───────────────────────────────────────────────────────────┤
│          │                                                           │
│ AI 商机  │ 1. 大模型生态    → 新模型发布、开源模型进展、模型即服务       │
│ 类型     │ 2. AI 应用落地   → 具体行业的 AI 解决方案、新用例            │
│          │ 3. AI 基础设施   → GPU 算力、推理优化、AI 芯片               │
│          │ 4. AI 工具链     → 训练平台、MLOps、向量数据库               │
│          │ 5. AI Agent      → 智能体框架、自动化工作流                  │
│          │ 6. 数据服务      → 数据标注、合成数据、数据市场               │
│          │ 7. AI 安全/治理  → 模型安全、AI 伦理、监管合规               │
│          │                                                           │
├──────────┼───────────────────────────────────────────────────────────┤
│          │                                                           │
│ 交叉领域 │ 1. AI + 云融合   → 模型托管服务、AI 云平台                  │
│          │ 2. 云原生 + AI   → Serverless AI、AI 微服务                │
│          │ 3. 边缘 + AI     → 边缘推理、端侧模型部署                  │
│          │                                                           │
└──────────┴───────────────────────────────────────────────────────────┘
```

**商机输出结构**（七大核心维度）：

```json
{
  "title": "商机标题",
  "summary": "一句话概述",
  "domain": "cloud | ai | cloud+ai",
  "sub_category": "具体子类别",
  "signal_type": "融资事件 | 并购合作 | 产品发布 | 技术突破 | ...",

  // ━━━━━━━━━━ 七大核心分析维度 ━━━━━━━━━━

  // 维度 1: 公司做什么
  "company_profile": {
    "name": "公司名称",
    "what_they_do": "核心业务描述（用通俗语言解释公司在做什么，解决什么问题）",
    "products": ["主要产品/服务列表"],
    "target_customers": "目标客户群体",
    "business_model": "商业模式（SaaS订阅/按量计费/项目制/...）",
    "stage": "seed | early | growth | mature",
    "founding_year": 2024,
    "headcount_estimate": "团队规模估算"
  },

  // 维度 2: 潜力如何
  "potential": {
    "market_size": "目标市场规模（TAM/SAM，带数据来源）",
    "growth_rate": "市场增长率",
    "competitive_advantage": "核心竞争优势是什么",
    "moat_type": "护城河类型: 技术壁垒 | 数据壁垒 | 网络效应 | 先发优势 | 品牌 | 无明显护城河",
    "scalability": "规模化潜力评估（技术是否可复用、边际成本是否递减）",
    "potential_rating": "high | medium | low",
    "potential_reasoning": "潜力判断的推理依据"
  },

  // 维度 3: 对行业的影响
  "industry_impact": {
    "impact_scope": "影响范围: 颠覆性 | 重大 | 中等 | 局部",
    "affected_sectors": ["受影响的行业/赛道列表"],
    "how_it_changes": "具体会怎样改变行业（降本？提效？替代？创造新需求？）",
    "competitive_response": "预期竞争对手会如何应对",
    "ecosystem_effect": "对上下游产业链的连带影响",
    "timeline": "影响显现的预估时间周期"
  },

  // 维度 4: 为什么可以融资 / 资本逻辑
  "funding_logic": {
    "funding_round": "天使 | Pre-A | A | B | C | D+ | Pre-IPO | IPO | 战略投资",
    "funding_amount": "融资金额",
    "valuation": "估值（如有）",
    "investors": ["投资方列表"],
    "lead_investor": "领投方",
    "why_fundable": "为什么资本愿意投（解释融资逻辑：赛道热度？技术稀缺？增长数据？团队光环？）",
    "capital_use": "融资用途推断（技术研发/市场扩张/团队扩充/...）",
    "previous_rounds": "历史融资情况摘要（如有）",
    "investor_signal": "投资方阵容传递的信号（明星基金？产业资本？国资？）"
  },

  // 维度 5: 创始人背景
  "founder_profile": {
    "name": "创始人/CEO 姓名",
    "education": "教育背景（学校+专业+学位）",
    "work_history": "职业经历（前公司+职位，重点标注大厂/知名公司经历）",
    "domain_expertise": "领域专长",
    "achievements": "关键成就（创业经历/获奖/影响力事件）",
    "network_signal": "人脉信号（是否有知名投资人/行业大佬背书）",
    "founder_rating": "strong | average | unknown",
    "data_completeness": "complete | partial | minimal"
  },

  // 维度 6: 是否有核心技术论文
  "core_tech": {
    "has_papers": true,
    "key_papers": [
      {
        "title": "论文标题",
        "venue": "发表会议/期刊（如 NeurIPS / ICML / Nature）",
        "year": 2025,
        "citations": 150,
        "relevance": "与公司业务的关联说明"
      }
    ],
    "patents": ["核心专利列表（如有）"],
    "open_source": ["开源项目（GitHub 链接+star 数，如有）"],
    "tech_originality": "原创性评估: 原创突破 | 工程创新 | 应用集成 | 跟随复制",
    "tech_rating": "cutting_edge | solid | average | weak"
  },

  // 维度 7: 是否是明星团队
  "star_team": {
    "is_star_team": true,
    "star_signals": [
      "创始人为前 Google Brain 研究员",
      "CTO 发表 3 篇顶会论文（ICML/NeurIPS）",
      "团队来自 OpenAI / DeepMind / 清华 / 北大"
    ],
    "team_completeness": "团队是否完整: 技术+产品+商务是否齐备",
    "key_members": [
      {
        "name": "姓名",
        "role": "职位",
        "background": "一句话背景"
      }
    ],
    "team_rating": "all_star | strong | average | unknown"
  },

  // ━━━━━━━━━━ 元数据 ━━━━━━━━━━

  "time_sensitivity": "urgent | short_term | medium_term | long_term",
  "confidence": 0.85,
  "data_completeness": "各维度信息完整度总结",
  "source_articles": ["来源文章ID列表"],
  "related_opportunities": ["关联商机ID"],
  "needs_human_review": false,
  "review_flags": ["需要人工关注的具体点"]
}
```

**工作流**：
1. 接收 Integrator Agent 的完整信息卡
2. 按商机识别模型判断是否构成有价值的商机
3. 对每个商机，按七大核心维度逐一分析填充：
   - **公司做什么**：从文章和补充信息中提炼核心业务描述
   - **潜力如何**：结合市场数据和竞争格局评估
   - **对行业的影响**：推理该事件对云/AI 行业生态的连带影响
   - **为什么可以融资**：从资本视角分析融资逻辑（赛道、技术、团队、数据）
   - **创始人背景**：汇总创始人的教育、工作、成就信息
   - **核心技术论文**：汇总团队的论文、专利、开源项目
   - **是否明星团队**：综合判断团队星级
4. 关联分析：将新商机与历史商机库关联，识别趋势和事件链
5. 对信息不足的维度标注 `data_completeness`，冲突信息标记 `needs_human_review = true`
6. 输出结构化商机数据存入 `opportunities` 表（状态 = `pending_evaluation`）
7. 通过 Agent Send 推送给 Evaluator Agent

---

#### Agent 5：Evaluator Agent（评估智能体 — 多维排名 + 人工审核衔接）

**职责**：对商机进行多维度评分排名，并将结果提交人工审核

**工作空间**：`~/.openclaw/workspace-evaluator/`

**IDENTITY.md**：
```markdown
name: Evaluator
emoji: ⚖️
theme: opportunity assessor and ranker
```

**绑定 Skills**：
- `seven-dimension-scorer` — 七维评分引擎（对齐商机输出结构）
- `importance-ranker` — 重要性排名算法
- `market-benchmark` — 市场基准数据对照

**绑定 MCP 工具**：
- LLM Task — 综合评估推理
- Web Tools — 搜索市场数据、行业报告辅助评估

**七维评分模型（对齐商机输出结构）**：

```
┌──────────────────────────────────────────────────────────────────────────┐
│              商机七维评分 & 排名模型（基于商机输出结构）                     │
├──────────────────┬──────┬────────────────────────────────────────────────┤
│  评分维度         │ 权重 │  评分标准 (1-10 分)                             │
│  (对应输出结构)    │      │                                                │
├──────────────────┼──────┼────────────────────────────────────────────────┤
│                  │      │                                                │
│ ① 公司做什么      │ 10% │ 业务清晰度：是否能用一句话说清楚做什么            │
│ (company_profile)│      │ 商业模式合理性：是否有成熟的变现路径              │
│                  │      │ 1分=业务模糊/变现不清  10分=业务明确/模式成熟     │
│                  │      │                                                │
├──────────────────┼──────┼────────────────────────────────────────────────┤
│                  │      │                                                │
│ ② 潜力如何        │ 20% │ 市场规模：TAM 是否足够大 (>10亿为佳)             │
│ (potential)      │      │ 增长趋势：市场是否在快速增长                     │
│                  │      │ 竞争优势：护城河是否深 (技术/数据/网络效应)       │
│                  │      │ 1分=小众市场/无壁垒  10分=百亿市场/深护城河      │
│                  │      │                                                │
├──────────────────┼──────┼────────────────────────────────────────────────┤
│                  │      │                                                │
│ ③ 对行业的影响    │ 15% │ 影响范围：是局部改良还是行业颠覆                  │
│ (industry_impact)│      │ 波及面：影响几个相关赛道                         │
│                  │      │ 1分=边缘影响/微创新  10分=颠覆格局/范式转移      │
│                  │      │                                                │
├──────────────────┼──────┼────────────────────────────────────────────────┤
│                  │      │                                                │
│ ④ 融资逻辑        │ 20% │ 融资阶段合理性：轮次与公司发展是否匹配            │
│ (funding_logic)  │      │ 投资方质量：是否有顶级 VC/产业资本               │
│                  │      │ 融资规模：金额是否匹配赛道和阶段                  │
│                  │      │ 历史融资：是否有持续融资能力                      │
│                  │      │ 1分=融资存疑/投资方弱  10分=明星资本/巨额融资    │
│                  │      │                                                │
├──────────────────┼──────┼────────────────────────────────────────────────┤
│                  │      │                                                │
│ ⑤ 创始人背景      │ 15% │ 教育：顶尖高校/知名实验室                       │
│ (founder_profile)│      │ 经历：大厂核心岗位/连续创业者/行业专家            │
│                  │      │ 成就：重大项目/获奖/行业影响力                   │
│                  │      │ 1分=背景不明/首次创业  10分=连续成功/行业大牛    │
│                  │      │                                                │
├──────────────────┼──────┼────────────────────────────────────────────────┤
│                  │      │                                                │
│ ⑥ 核心技术论文    │ 10% │ 论文发表：是否有顶会/顶刊论文                    │
│ (core_tech)      │      │ 引用影响：论文引用量和影响力                     │
│                  │      │ 专利/开源：是否有核心专利或高 Star 开源项目       │
│                  │      │ 技术原创性：原创突破 vs 工程集成                  │
│                  │      │ 1分=无论文无专利  10分=顶会论文+高引用+开源标杆  │
│                  │      │                                                │
├──────────────────┼──────┼────────────────────────────────────────────────┤
│                  │      │                                                │
│ ⑦ 明星团队        │ 10% │ 团队背景：是否来自顶尖机构 (FAANG/清北/顶级实验室)│
│ (star_team)      │      │ 团队完整度：技术+产品+商务是否齐备               │
│                  │      │ 行业认可：是否有明显的「明星光环」                │
│                  │      │ 1分=团队信息缺失  10分=全明星阵容/行业公认强团队  │
│                  │      │                                                │
├──────────────────┼──────┼────────────────────────────────────────────────┤
│                  │      │                                                │
│ 综合加权得分       │ 100%│  Σ(维度分 × 权重)，满分 10 分                   │
│                  │      │                                                │
└──────────────────┴──────┴────────────────────────────────────────────────┘

信息缺失处理：
  - 如果某个维度信息缺失（data_completeness = minimal），该维度按 3 分兜底
  - 但同时标记 needs_human_review = true，提醒人工关注
  - 有 ≥3 个维度缺失的商机自动降一级
```

**排名策略**：

```
商机按以下优先级排序：

  1. 首先按"重要性等级"分层：
     - S 级 (≥8.0分): 重大机会 — 顶级团队+强融资+大市场，需立即关注
     - A 级 (6.5-7.9分): 高价值机会 — 多维度表现优秀，建议一周内跟进
     - B 级 (5.0-6.4分): 有潜力 — 部分维度突出但有短板，纳入跟踪池
     - C 级 (<5.0分): 低优先级 — 信息不足或多维度偏弱，仅归档

  2. 同级别内按"关键维度突出度"排序：
     - 融资逻辑(④)得分 ≥ 8 的优先（资本认可度高）
     - 创始人(⑤)+明星团队(⑦)合计 ≥ 16 的优先（团队驱动）
     - 核心技术(⑥)得分 ≥ 8 的优先（技术壁垒强）

  3. 最后按综合加权得分降序

  特殊标记：
  - "技术黑马" 🏴 : ⑥核心技术 ≥ 9 但 ④融资 ≤ 5（有硬技术但尚未获资本关注）
  - "资本宠儿" 💰 : ④融资 ≥ 9 但 ⑥核心技术 ≤ 5（资本热捧但技术待验证）
  - "全能选手" ⭐ : 7个维度均 ≥ 7（各方面均衡优秀）
```

**工作流**：
1. 接收 Analyst Agent 的七维商机数据
2. 对每个商机按七维模型逐项评分
3. 必要时搜索补充市场基准数据辅助评分
4. 计算加权综合得分，划定重要性等级（S/A/B/C）
5. 识别特殊标记（技术黑马/资本宠儿/全能选手）
6. 按排名策略生成排序列表
7. **准备人工审核材料**（见下方审核环节设计）
8. 将商机状态更新为 `pending_review`，写入 `review_queue` 表
9. 前端实时推送审核通知

---

### 2.3 人工审核环节 — 轻量化设计

**核心原则**：让人做判断，不让人做苦力。AI 完成所有信息整理和预判，人只需要做**简单选择**。

#### 审核界面设计（前端审核台）

```
┌───────────────────────────────────────────────────────────────────┐
│  📋 商机审核台                                    待审: 5 条      │
├───────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 🔴 S级 │ AWS 发布 AI Agent 托管服务，挑战 Azure OpenAI     │  │
│  │                                                             │  │
│  │ AI 预判: 综合 8.7分  时效: 紧急  领域: Cloud+AI             │  │
│  │                                                             │  │
│  │ ┌─ 一句话摘要 ────────────────────────────────────────────┐ │  │
│  │ │ AWS re:Invent 2026 发布 Bedrock Agent Hosting，直接      │ │  │
│  │ │ 对标 Azure OpenAI Service，支持自定义模型部署...          │ │  │
│  │ └────────────────────────────────────────────────────────┘ │  │
│  │                                                             │  │
│  │ 来源: [机器之心 2/5] [36氪 2/6]  信息来源: 2篇整合          │  │
│  │                                                             │  │
│  │ ┌──────────────── 您的操作 ──────────────────────────┐     │  │
│  │ │                                                    │     │  │
│  │ │  [✅ 通过]  [✏️ 调级: S/A/B/C ▼]  [❌ 驳回]       │     │  │
│  │ │                                                    │     │  │
│  │ │  驳回原因(可选): [信息不实 ▼] 或 输入备注 ______    │     │  │
│  │ │                                                    │     │  │
│  │ └────────────────────────────────────────────────────┘     │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 🟡 A级 │ 通义千问 3.0 开源，推理速度提升 3 倍...           │  │
│  │ ...                                                         │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

**审核操作只有三种**（保持简洁）：

| 操作 | 说明 | 后续流程 |
|------|------|---------|
| ✅ **通过** | 认可 AI 的分析和评级 | 商机入库（`status = approved`），推送给 Reporter Agent |
| ✏️ **调级** | AI 评级不准，人工调整等级 | 下拉选 S/A/B/C，然后入库 |
| ❌ **驳回** | 信息不实 / 不值得关注 | 选择预设原因或填写简短备注，标记 `rejected` |

**减轻人工负担的机制**：

```
1. 自动通过规则：
   - B/C 级商机如果无信息冲突标记，72h 后自动通过（无需人工介入）
   - 信息完整度 ≥ 0.9 且无冲突的 A 级商机，48h 后自动通过

2. 批量操作：
   - 支持"全部通过本页 B/C 级"一键操作
   - 支持按行业/类型筛选后批量处理

3. AI 预审意见：
   - 每条商机附带 AI 的信心度（confidence）
   - 信息冲突处高亮标注，鼠标悬停显示各来源的不同说法
   - 关键数据旁标注来源链接，方便快速核实

4. 审核耗时统计：
   - 目标：单条审核 < 30 秒
   - S/A 级需逐条审核
   - B/C 级可批量处理
```

**审核后数据流**：
```
审核通过 → opportunities.status = 'approved' → Agent Send 通知 Reporter Agent
审核调级 → 更新 importance_level → 同上
审核驳回 → opportunities.status = 'rejected' + reject_reason → 归档
          → 反馈给 Analyst Agent 用于迭代优化识别模型
```

---

#### Agent 6：Reporter Agent（报告生成智能体 — 图文混排）

**职责**：生成包含流程图、产品截图、数据图表的**图文混排**商机报告

**工作空间**：`~/.openclaw/workspace-reporter/`

**IDENTITY.md**：
```markdown
name: Reporter
emoji: 📊
theme: visual report generator
```

**绑定 Skills**：
- `flowchart-generator` — 流程图/架构图生成（Mermaid → SVG/PNG）
- `screenshot-crawler` — 产品截图采集（访问产品官网截取界面）
- `chart-renderer` — 数据图表渲染（ECharts/D3 → 图片）
- `report-composer` — 图文混排报告合成（HTML/PDF）

**绑定 MCP 工具**：
- LLM Task — 撰写报告文案、生成 Mermaid 流程图代码
- Browser（OpenClaw 内置）— 访问产品官网截取产品截图
- Exec Tool — 调用 Puppeteer/Playwright 渲染图表和截图、生成 PDF

**报告图文能力详解**：

##### a) 流程图生成

```
输入: 商机分析中的业务流程/技术架构/市场关系
  ↓
LLM 生成 Mermaid 语法
  ↓
┌─────────────────────────────────────────┐
│ graph LR                                │
│   A[用户请求] --> B[API Gateway]         │
│   B --> C[模型推理服务]                   │
│   C --> D[Bedrock Agent]                │
│   D --> E[返回结果]                      │
└─────────────────────────────────────────┘
  ↓
Mermaid CLI 渲染为 SVG/PNG
  ↓
嵌入报告
```

支持的图表类型：
- **流程图**（flowchart）：技术方案流程、业务逻辑
- **架构图**（graph）：产品架构、系统拓扑
- **时间线**（timeline）：事件发展脉络
- **竞品对比矩阵**（quadrant chart）：二维象限分析
- **市场份额饼图**（pie）：市场格局

##### b) 产品截图采集

```
输入: 商机涉及的产品名称和官网 URL
  ↓
Browser 工具自动化流程:
  1. 打开产品官网
  2. 定位产品介绍/控制台页面
  3. 自动截图（全页 / 关键区域）
  4. 图片压缩 + 水印标注来源
  ↓
存储到 /screenshots/{opportunity_id}/
  ↓
嵌入报告（带标注说明）
```

截图场景：
- 产品控制台界面 → 展示产品形态
- 官网定价页面 → 展示价格策略
- 产品功能对比表 → 展示竞品差异
- 技术文档架构图 → 展示技术方案

##### c) 图文混排报告模板

```
┌──────────────────────────────────────────────────────────┐
│                                                          │
│  📊 商机报告：AWS Bedrock Agent Hosting 发布             │
│  等级: S级 │ 评分: 8.7 │ 时效: 紧急 │ 2026-02-06        │
│                                                          │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                          │
│  ## 概述                                                  │
│  AWS 在 re:Invent 2026 发布了 Bedrock Agent Hosting...   │
│                                                          │
│  ## 市场格局                                              │
│  ┌──────────────────────────┐                            │
│  │   [竞品象限图 - 图片]     │ ← Mermaid quadrant chart  │
│  │   Azure ●    AWS ●       │                            │
│  │   GCP ●   阿里云 ●       │                            │
│  └──────────────────────────┘                            │
│                                                          │
│  ## 产品形态                                              │
│  ┌──────────────────────────┐                            │
│  │   [产品控制台截图]        │ ← Browser 自动截取         │
│  │                          │                            │
│  └──────────────────────────┘                            │
│  图: AWS Bedrock Agent Hosting 控制台界面                 │
│                                                          │
│  ## 技术架构                                              │
│  ┌──────────────────────────┐                            │
│  │   [架构流程图]            │ ← Mermaid graph 渲染       │
│  │   用户→API→Agent→模型     │                            │
│  └──────────────────────────┘                            │
│                                                          │
│  ## 市场数据                                              │
│  ┌──────────────────────────┐                            │
│  │   [市场份额趋势图]        │ ← ECharts 渲染            │
│  │   📈 折线图               │                            │
│  └──────────────────────────┘                            │
│                                                          │
│  ## AI 分析与建议                                         │
│  - 机会窗口: 3-6个月                                      │
│  - 建议行动: ...                                          │
│                                                          │
│  ## 来源文章                                              │
│  1. [机器之心] AWS re:Invent... (2026-02-05)             │
│  2. [36氪] 云厂商 AI Agent 大战... (2026-02-06)          │
│                                                          │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│  生成时间: 2026-02-07 08:30 │ 信心度: 85%                │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

**输出格式**：
- **HTML 报告**（主要格式）— 在前端报告中心直接阅读，支持交互式图表
- **PDF 报告**（存档格式）— 通过 Puppeteer 从 HTML 渲染，用于离线分享
- **Markdown 报告**（轻量格式）— 用于嵌入其他系统或快速浏览

**工作流**：
1. 接收人工审核通过的商机数据（已批准的 S/A/B 级商机）
2. **内容规划**：根据商机类型决定报告模板和需要的图表类型
3. **流程图生成**：
   - LLM 分析商机涉及的业务流程/技术架构
   - 生成 Mermaid 代码
   - 渲染为 SVG 图片
4. **产品截图采集**：
   - 从商机中提取产品名称和官网 URL
   - 通过 Browser 工具访问官网，自动截图关键页面
   - 图片裁剪、压缩、标注
5. **数据图表渲染**：
   - 将市场数据、评分数据生成 ECharts 配置
   - 渲染为静态图片嵌入报告
6. **图文合成**：
   - LLM 撰写报告文案
   - 按模板组装图文混排内容
   - 生成 HTML + PDF 双格式
7. 存入 `reports` 表，前端报告中心可直接查阅

---

### 2.4 Skills 层

每个 Skill 是一个包含 `SKILL.md` 的目录，放置在对应 Agent 的 workspace 下：

```
~/.openclaw/
├── workspace-crawler/
│   └── skills/
│       ├── wechat-crawler/
│       │   └── SKILL.md            # 封装 wechat-article-exporter API
│       ├── rss-reader/
│       │   └── SKILL.md            # RSS 源采集
│       └── schedule/
│           └── SKILL.md            # 定时任务管理
│
├── workspace-cleaner/
│   └── skills/
│       ├── html-parser/
│       │   └── SKILL.md            # HTML 清洗
│       ├── cloud-ai-classifier/
│       │   └── SKILL.md            # 云 & AI 领域分类器
│       ├── funding-extractor/
│       │   └── SKILL.md            # 🆕 投融资信息专项提取
│       └── entity-extractor/
│           └── SKILL.md            # 领域实体抽取
│
├── workspace-integrator/                # 信息整合 Agent
│   └── skills/
│       ├── gap-analyzer/
│       │   └── SKILL.md            # 信息缺口分析
│       ├── web-researcher/
│       │   └── SKILL.md            # 多源信息搜索
│       ├── cross-reference/
│       │   └── SKILL.md            # 多文章交叉引用
│       ├── founder-profiler/
│       │   └── SKILL.md            # 🆕 创始人/团队背景调研
│       └── cloud-ai-knowledge/
│           └── SKILL.md            # 云 & AI 领域知识库
│
├── workspace-analyst/
│   └── skills/
│       ├── cloud-opportunity-detector/
│       │   └── SKILL.md            # 云计算商机识别 🆕
│       ├── ai-opportunity-detector/
│       │   └── SKILL.md            # AI 商机识别 🆕
│       ├── competitive-landscape/
│       │   └── SKILL.md            # 竞争格局分析 🆕
│       └── tech-trend-tracker/
│           └── SKILL.md            # 技术趋势追踪 🆕
│
├── workspace-evaluator/
│   └── skills/
│       ├── seven-dimension-scorer/
│       │   └── SKILL.md            # 🆕 七维评分引擎（对齐商机输出结构）
│       ├── importance-ranker/
│       │   └── SKILL.md            # 重要性排名
│       └── market-benchmark/
│           └── SKILL.md            # 市场基准对照
│
├── workspace-reporter/
│   └── skills/
│       ├── flowchart-generator/
│       │   └── SKILL.md            # 流程图生成 (Mermaid) 🆕
│       ├── screenshot-crawler/
│       │   └── SKILL.md            # 产品截图采集 🆕
│       ├── chart-renderer/
│       │   └── SKILL.md            # 数据图表渲染 🆕
│       └── report-composer/
│           └── SKILL.md            # 图文混排报告合成 🆕
│
└── skills/                              # 共享 Skills（所有 Agent 可用）
    ├── db-connector/
    │   └── SKILL.md                # 数据库连接
    └── search-engine/
        └── SKILL.md                # 全文搜索
```

**SKILL.md 示例**（`funding-extractor`）：

```yaml
---
name: funding-extractor
description: 投融资信息专项提取器，从文章中提取融资轮次、金额、投资方、创始人背景等关键信息
metadata: {"openclaw":{"always":true,"requires":{"env":["FUNDING_MCP_URL"]},"primaryEnv":"FUNDING_MCP_URL"}}
---

## 使用方法
当 Cleaner Agent 处理文章时，优先调用此 Skill 提取投融资信息。

### 提取流程
1. 识别文章中是否包含投融资/并购事件
2. 提取结构化字段：
   - 公司名称 + 核心业务描述
   - 融资轮次（天使/A/B/C/...）+ 金额 + 币种
   - 投资方列表（区分领投/跟投）
   - 估值（如有）
   - 创始人/CEO 姓名 + 背景线索
   - 团队规模和核心成员信息线索
3. 如果关键字段（融资金额/投资方/创始人）缺失：
   - 调用投融资数据 MCP 查询 IT桔子/天眼查补充
   - 标注哪些字段是原文提取、哪些是 MCP 补充

### 输出格式
返回 JSON 对象，包含:
- funding_company: 公司名称
- funding_round: 融资轮次
- funding_amount: 融资金额
- investors: 投资方列表
- lead_investor: 领投方
- valuation: 估值
- founder_name: 创始人姓名
- founder_clues: 创始人背景线索
- company_desc: 公司业务描述
- team_clues: 团队信息线索
- data_sources: {field: "original" | "mcp_supplemented"}
```

---

### 2.5 MCP (Model Context Protocol) 工具层

MCP Server 为 Agent 提供标准化的工具接口：

```
┌──────────────────────────────────────────────────┐
│                MCP Server 集群                    │
├──────────────┬───────────────────────────────────┤
│              │                                   │
│  database    │  PostgreSQL 读写操作                │
│  MCP Server  │  - query: 执行 SQL 查询            │
│              │  - insert: 插入数据                 │
│              │  - update: 更新数据                 │
│              │                                   │
├──────────────┼───────────────────────────────────┤
│              │                                   │
│  search      │  Meilisearch / ES 全文检索         │
│  MCP Server  │  - search: 全文搜索                │
│              │  - index: 索引文档                 │
│              │                                   │
├──────────────┼───────────────────────────────────┤
│              │                                   │
│  wechat      │  封装 wechat-article-exporter      │
│  MCP Server  │  - search_accounts: 搜索公众号      │
│              │  - list_articles: 获取文章列表       │
│              │  - download_article: 下载文章       │
│              │                                   │
├──────────────┼───────────────────────────────────┤
│              │                                   │
│ 🆕 funding  │  投融资数据服务                      │
│  MCP Server  │  对接 IT桔子 / 天眼查 / 企查查      │
│              │  - search_company: 查询公司融资记录  │
│              │  - get_funding_history: 融资历史     │
│              │  - get_investors: 投资方信息         │
│              │  - get_company_info: 公司工商信息    │
│              │  - get_shareholders: 股东结构        │
│              │                                   │
├──────────────┼───────────────────────────────────┤
│              │                                   │
│ 🆕 academic │  学术搜索服务                       │
│  MCP Server  │  对接 Semantic Scholar / DBLP      │
│              │  - search_papers: 按作者/关键词搜索  │
│              │  - get_author_profile: 作者学术画像  │
│              │  - get_citations: 论文引用数据       │
│              │  - search_patents: 专利检索          │
│              │                                   │
├──────────────┼───────────────────────────────────┤
│              │                                   │
│  screenshot  │  截图服务（Playwright 封装）         │
│  MCP Server  │  - capture_page: 整页截图           │
│              │  - capture_element: 元素截图         │
│              │  - capture_area: 区域截图            │
│              │                                   │
└──────────────┴───────────────────────────────────┘
```

每个 MCP Server 是一个独立的轻量服务，通过标准 JSON-RPC 协议与 OpenClaw Agent 通信。

---

### 2.6 OpenProse 工作流编排

使用 OpenClaw 的 OpenProse 插件编排多 Agent 协作的完整流水线：

**文件**：`workflows/daily-scan.prose`

```markdown
# 每日云 & AI 商机扫描工作流

## Phase 1: 采集 (并行)
> agent: crawler
> parallel: true

对以下公众号进行增量采集：
- 云厂商官方号、AI 行业媒体、综合科技媒体、投融资媒体
- 各行业垂直公众号（按配置列表）

## Phase 2: 清洗（投融资优先）
> agent: cleaner
> depends: phase-1

处理所有新采集的文章：
- 投融资信息专项提取（融资轮次/金额/投资方/创始人）
- 不完整时立即调用投融资数据 MCP 补充
- 领域分类、实体抽取、信息完整度评分

## Phase 3: 信息整合
> agent: integrator
> depends: phase-2

对信息不完整的条目深度补充：
- 投融资数据 MCP 补充融资详情
- 学术搜索 MCP 查询团队论文
- 企业信息 MCP 查询创始人/股东
- 多文章交叉引用融合

## Phase 4: 七维商机分析
> agent: analyst
> depends: phase-3

按七大维度分析云 & AI 商机：
- 公司做什么 / 潜力如何 / 行业影响
- 融资逻辑 / 创始人背景 / 核心技术论文 / 明星团队

## Phase 5: 七维评估排名
> agent: evaluator
> depends: phase-4

基于商机输出结构评分排名：
- 七维评分模型（对齐分析维度）
- S/A/B/C 分级 + 特殊标记（技术黑马/资本宠儿/全能选手）
- 提交人工审核队列

## Phase 6: 人工审核
> require: human-approval
> timeout: 72h
> auto-approve: B,C级无冲突商机

等待人工在审核台确认：
- S/A 级逐条审核
- B/C 级支持批量或自动通过

## Phase 7: 报告生成
> agent: reporter
> depends: phase-6

为审核通过的商机生成图文混排报告：
- 生成流程图和架构图
- 采集产品截图
- 渲染数据图表
- 合成 HTML + PDF 报告
```

通过 OpenClaw 的 Cron Jobs 配置每日自动执行：
```json
{
  "cron": {
    "jobs": [
      {
        "schedule": "0 7 * * *",
        "workflow": "workflows/daily-scan.prose",
        "description": "每日早7点自动执行云&AI商机扫描（预留人工审核时间，9点前出报告）"
      }
    ]
  }
}
```

---

## 三、前端架构

### 3.1 技术选型

| 技术 | 用途 |
|------|------|
| Next.js 15 (App Router) | 前端框架，SSR + API Routes |
| Tailwind CSS + shadcn/ui | UI 组件库 |
| TanStack Query | 数据请求与缓存 |
| Recharts / ECharts | 数据可视化 |
| WebSocket | 实时审核通知与 Agent 状态推送 |

### 3.2 页面结构

```
/                          → 仪表盘首页（今日概览、关键指标）
/opportunities             → 商机看板（卡片/列表/看板多视图）
/opportunities/:id         → 商机详情（来源文章、分析报告、评分详情）
/review                    → 🆕 人工审核台（待审核商机队列）
/review/history            → 🆕 审核历史（已处理的审核记录）
/articles                  → 文章库（已采集文章浏览与搜索）
/articles/:id              → 文章详情（原文阅读、AI 摘要）
/accounts                  → 公众号管理（添加/删除目标公众号）
/reports                   → 报告中心（图文混排报告阅读 + PDF 下载）
/reports/:id               → 报告详情（交互式图表 + 产品截图）
/agents                    → Agent 监控（各 Agent 运行状态）
/settings                  → 系统设置（模型配置、评分权重、自动通过规则）
```

### 3.3 仪表盘设计

```
┌────────────────────────────────────────────────────────────┐
│  ☁️ 云 & AI 商机发掘系统                        [用户头像]  │
├────────┬───────────────────────────────────────────────────┤
│        │                                                   │
│ 仪表盘  │  ┌──────────┐ ┌──────────┐ ┌──────────┐          │
│ 审核台  │  │ 今日新增   │ │ 待审核    │ │ S级商机   │          │
│ 商机    │  │ 商机 15条  │ │ 5条      │ │ 2条      │          │
│ 文章库  │  └──────────┘ └──────────┘ └──────────┘          │
│ 公众号  │                                                   │
│ 报告    │  ┌──────────────┐ ┌──────────────┐               │
│ Agent  │  │ 云计算商机 8条 │ │ AI 商机 7条   │               │
│ 设置    │  │ IaaS: 2      │ │ 大模型: 3     │               │
│        │  │ PaaS: 3      │ │ AI应用: 2     │               │
│        │  │ SaaS: 2      │ │ AI基建: 1     │               │
│        │  │ 云安全: 1     │ │ Agent: 1     │               │
│        │  └──────────────┘ └──────────────┘               │
│        │                                                   │
│        │  ┌────────────────────────────────────────────┐   │
│        │  │         商机趋势图 (近30天)                  │   │
│        │  │  📈 堆叠面积图：云 vs AI 商机数量            │   │
│        │  └────────────────────────────────────────────┘   │
│        │                                                   │
│        │  ┌────────────────────────────────────────────┐   │
│        │  │         最新 S/A 级商机                      │   │
│        │  │  🔴 [S 8.7] AWS Agent Hosting 挑战 Azure.. │   │
│        │  │  🔴 [S 8.5] 通义千问3.0开源冲击闭源格局...  │   │
│        │  │  🟡 [A 7.8] 国内云厂商集体降价，IaaS洗牌.. │   │
│        │  │  🟡 [A 7.3] RAG 2.0 框架涌现，向量数据库..  │   │
│        │  └────────────────────────────────────────────┘   │
│        │                                                   │
│        │  ┌──────────────────┐ ┌──────────────────────┐   │
│        │  │ Agent 流水线状态   │ │ 厂商热度 Top 5       │   │
│        │  │ 🟢 Crawler  运行中│ │ 1. AWS        ████  │   │
│        │  │ 🟢 Cleaner  运行中│ │ 2. OpenAI     ███   │   │
│        │  │ 🟢 Integrator 🆕 │ │ 3. 阿里云     ███   │   │
│        │  │ 🟡 Analyst  等待中│ │ 4. Azure      ██    │   │
│        │  │ ⚪ Evaluator     │ │ 5. 百度智能云  ██    │   │
│        │  │ ⚪ Reporter      │ │                      │   │
│        │  └──────────────────┘ └──────────────────────┘   │
└────────┴───────────────────────────────────────────────────┘
```

---

## 四、后端架构

### 4.1 技术选型

| 技术 | 用途 |
|------|------|
| OpenClaw Gateway | 核心多智能体运行时 + WebSocket 网关 |
| Node.js (Express/Fastify) | REST API 服务（前端对接） |
| PostgreSQL | 主数据库（文章、商机、审核、配置） |
| Redis | 缓存 + 消息队列 + 会话管理 |
| Meilisearch | 全文搜索引擎（文章和商机检索） |
| Playwright | 产品截图采集 + PDF 渲染 |
| Mermaid CLI | 流程图/架构图渲染 |
| Docker Compose | 容器化部署编排 |

### 4.2 数据模型

```sql
-- 目标公众号
CREATE TABLE accounts (
    id          SERIAL PRIMARY KEY,
    name        VARCHAR(255) NOT NULL,      -- 公众号名称
    wechat_id   VARCHAR(255),               -- 微信号
    category    VARCHAR(100),               -- 行业分类 (cloud/ai/tech/finance)
    priority    INT DEFAULT 5,              -- 采集优先级
    is_active   BOOLEAN DEFAULT true,
    created_at  TIMESTAMP DEFAULT NOW()
);

-- 原始文章
CREATE TABLE raw_articles (
    id          SERIAL PRIMARY KEY,
    account_id  INT REFERENCES accounts(id),
    title       TEXT NOT NULL,
    author      VARCHAR(255),
    content_html TEXT,                       -- 原始 HTML
    url         TEXT,                        -- 原文链接
    publish_time TIMESTAMP,
    read_count   INT,
    like_count   INT,
    comment_count INT,
    crawled_at  TIMESTAMP DEFAULT NOW()
);

-- 清洗后的文章（投融资 & 云 AI 聚焦）
CREATE TABLE cleaned_articles (
    id                SERIAL PRIMARY KEY,
    raw_id            INT REFERENCES raw_articles(id),
    content_text      TEXT,                  -- 纯文本正文
    summary           TEXT,                  -- AI 生成摘要（投融资+云/AI 视角）
    primary_category  VARCHAR(50),           -- 一级分类 (cloud/ai/data/security...)
    signal_types      JSONB,                 -- 信号类型数组
    entities          JSONB,                 -- 领域实体 {vendors, products, techs, amounts, people}

    -- 🆕 投融资专项信息
    funding_company   VARCHAR(255),          -- 融资公司名称
    funding_round     VARCHAR(50),           -- 融资轮次
    funding_amount    VARCHAR(100),          -- 融资金额
    investors         JSONB,                 -- 投资方列表
    lead_investor     VARCHAR(255),          -- 领投方
    valuation         VARCHAR(100),          -- 估值
    founder_name      VARCHAR(255),          -- 创始人/CEO 姓名
    founder_clues     JSONB,                 -- 创始人背景线索
    company_desc      TEXT,                  -- 公司核心业务描述
    team_clues        JSONB,                 -- 团队信息线索

    completeness_score DECIMAL(3,2),         -- 信息完整度评分 (0-1)
    tags              JSONB,                 -- 标签数组
    processed_at      TIMESTAMP DEFAULT NOW()
);

-- 🆕 信息补充记录（Integrator Agent 产出）
CREATE TABLE integration_logs (
    id                SERIAL PRIMARY KEY,
    cleaned_article_id INT REFERENCES cleaned_articles(id),
    gap_dimensions    JSONB,                 -- 缺失维度列表
    supplements       JSONB,                 -- 补充内容 [{field, value, source_type, source_url}]
    score_before      DECIMAL(3,2),          -- 补充前完整度
    score_after       DECIMAL(3,2),          -- 补充后完整度
    related_articles  JSONB,                 -- 交叉引用的文章 ID 列表
    conflicts         JSONB,                 -- 信息冲突记录
    integrated_at     TIMESTAMP DEFAULT NOW()
);

-- 商机（七维结构化）
CREATE TABLE opportunities (
    id                    SERIAL PRIMARY KEY,
    title                 VARCHAR(500) NOT NULL,
    summary               TEXT,                -- 一句话概述
    domain                VARCHAR(20),         -- cloud / ai / cloud+ai
    sub_category          VARCHAR(100),        -- 具体子类别
    signal_type           VARCHAR(50),         -- 信号类型

    -- ━━ 维度①: 公司做什么 ━━
    company_name          VARCHAR(255),        -- 公司名称
    company_what_they_do  TEXT,                -- 核心业务描述
    company_products      JSONB,               -- 产品/服务列表
    company_business_model VARCHAR(100),       -- 商业模式
    company_stage         VARCHAR(20),         -- seed/early/growth/mature
    company_profile_full  JSONB,               -- 完整 company_profile 结构

    -- ━━ 维度②: 潜力如何 ━━
    potential_market_size TEXT,                -- 目标市场规模
    potential_moat_type   VARCHAR(50),         -- 护城河类型
    potential_rating      VARCHAR(10),         -- high/medium/low
    potential_full        JSONB,               -- 完整 potential 结构

    -- ━━ 维度③: 对行业的影响 ━━
    impact_scope          VARCHAR(20),         -- 颠覆性/重大/中等/局部
    impact_affected_sectors JSONB,             -- 受影响赛道
    industry_impact_full  JSONB,               -- 完整 industry_impact 结构

    -- ━━ 维度④: 为什么可以融资 ━━
    funding_round         VARCHAR(50),         -- 融资轮次
    funding_amount        VARCHAR(100),        -- 融资金额
    funding_valuation     VARCHAR(100),        -- 估值
    funding_investors     JSONB,               -- 投资方列表
    funding_lead_investor VARCHAR(255),        -- 领投方
    funding_why_fundable  TEXT,                -- 融资逻辑分析
    funding_logic_full    JSONB,               -- 完整 funding_logic 结构

    -- ━━ 维度⑤: 创始人背景 ━━
    founder_name          VARCHAR(255),        -- 创始人姓名
    founder_education     TEXT,                -- 教育背景
    founder_work_history  TEXT,                -- 工作经历
    founder_rating        VARCHAR(10),         -- strong/average/unknown
    founder_profile_full  JSONB,               -- 完整 founder_profile 结构

    -- ━━ 维度⑥: 核心技术论文 ━━
    has_papers            BOOLEAN DEFAULT false,
    key_papers            JSONB,               -- 核心论文列表
    patents               JSONB,               -- 专利列表
    open_source           JSONB,               -- 开源项目列表
    tech_originality      VARCHAR(20),         -- 原创突破/工程创新/应用集成/跟随复制
    tech_rating           VARCHAR(20),         -- cutting_edge/solid/average/weak
    core_tech_full        JSONB,               -- 完整 core_tech 结构

    -- ━━ 维度⑦: 是否明星团队 ━━
    is_star_team          BOOLEAN DEFAULT false,
    star_signals          JSONB,               -- 明星信号列表
    key_members           JSONB,               -- 核心成员列表
    team_rating           VARCHAR(20),         -- all_star/strong/average/unknown
    star_team_full        JSONB,               -- 完整 star_team 结构

    -- ━━ 七维评分（对齐商机输出结构）━━
    score_total           DECIMAL(4,2),        -- 综合加权得分
    score_company         INT,                 -- ①公司做什么 1-10
    score_potential       INT,                 -- ②潜力如何 1-10
    score_impact          INT,                 -- ③行业影响 1-10
    score_funding         INT,                 -- ④融资逻辑 1-10
    score_founder         INT,                 -- ⑤创始人背景 1-10
    score_tech            INT,                 -- ⑥核心技术 1-10
    score_team            INT,                 -- ⑦明星团队 1-10

    -- ━━ 排名与标记 ━━
    importance_level      CHAR(1),             -- S/A/B/C
    rank_in_level         INT,                 -- 同级别内排名
    special_tag           VARCHAR(20),         -- tech_dark_horse/capital_darling/all_rounder
    needs_human_review    BOOLEAN DEFAULT false,
    review_flags          JSONB,               -- 需人工关注的具体点

    -- ━━ 元数据 ━━
    time_sensitivity      VARCHAR(20),         -- urgent/short_term/medium_term/long_term
    confidence            DECIMAL(3,2),        -- AI 信心度
    data_completeness     TEXT,                -- 各维度信息完整度总结
    source_articles       JSONB,               -- 来源文章 ID 列表
    related_opportunities JSONB,               -- 关联商机 ID

    -- ━━ 审核状态 ━━
    status                VARCHAR(20) DEFAULT 'pending_evaluation',
    -- pending_evaluation / pending_review / approved / rejected / archived
    reviewed_by           VARCHAR(100),
    reviewed_at           TIMESTAMP,
    review_action         VARCHAR(20),         -- approve / adjust_level / reject
    reject_reason         TEXT,

    created_at            TIMESTAMP DEFAULT NOW(),
    updated_at            TIMESTAMP DEFAULT NOW()
);

-- 🆕 审核队列
CREATE TABLE review_queue (
    id              SERIAL PRIMARY KEY,
    opportunity_id  INT REFERENCES opportunities(id),
    importance_level CHAR(1),
    score_total     DECIMAL(4,2),
    ai_summary      TEXT,                    -- AI 预审摘要（供人工快速阅读）
    conflict_flags  JSONB,                   -- 信息冲突标记
    auto_approve_at TIMESTAMP,               -- 自动通过时间（B/C 级）
    status          VARCHAR(20) DEFAULT 'pending',  -- pending / reviewed / auto_approved
    created_at      TIMESTAMP DEFAULT NOW()
);

-- 🆕 报告（支持图文混排）
CREATE TABLE reports (
    id              SERIAL PRIMARY KEY,
    opportunity_id  INT REFERENCES opportunities(id),
    title           VARCHAR(500),
    report_html     TEXT,                    -- HTML 格式报告（图文混排）
    report_pdf_url  VARCHAR(500),            -- PDF 文件路径
    screenshots     JSONB,                   -- 截图列表 [{url, caption, source}]
    flowcharts      JSONB,                   -- 流程图列表 [{mermaid_code, svg_url, caption}]
    charts          JSONB,                   -- 数据图表 [{type, config, image_url}]
    created_at      TIMESTAMP DEFAULT NOW()
);

-- Agent 运行日志
CREATE TABLE agent_logs (
    id          SERIAL PRIMARY KEY,
    agent_name  VARCHAR(50),
    run_id      VARCHAR(100),
    action      VARCHAR(100),
    input_data  JSONB,
    output_data JSONB,
    status      VARCHAR(20),                -- success/error/timeout
    duration_ms INT,
    created_at  TIMESTAMP DEFAULT NOW()
);
```

---

## 五、部署架构

### 5.1 Docker Compose 编排

```yaml
services:
  # === 基础设施 ===
  postgres:          # 主数据库
  redis:             # 缓存 + 队列
  meilisearch:       # 全文搜索

  # === 数据采集 ===
  wechat-exporter:   # 微信文章爬虫（独立容器）
    image: wechat-article-exporter:latest
    ports: ["3100:3000"]

  # === 多智能体核心 ===
  openclaw-gateway:  # OpenClaw Gateway 主进程
    depends_on: [postgres, redis]
    volumes:
      - ./agents:/root/.openclaw
      - ./workflows:/root/workflows
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}

  # === MCP Servers ===
  mcp-database:      # 数据库 MCP Server
  mcp-search:        # 搜索引擎 MCP Server
  mcp-wechat:        # 微信采集 MCP Server
  mcp-funding:       # 🆕 投融资数据 MCP Server (IT桔子/天眼查)
  mcp-academic:      # 🆕 学术搜索 MCP Server (Semantic Scholar/DBLP)
  mcp-screenshot:    # 截图 MCP Server (Playwright)

  # === 前端 ===
  web:               # Next.js 前端应用（含审核台）
    depends_on: [openclaw-gateway]
    ports: ["3000:3000"]
```

### 5.2 整体部署拓扑

```
                       ┌─────────┐
                       │  用户    │
                       │ 浏览器   │
                       └────┬────┘
                            │ HTTPS
                       ┌────▼────┐
                       │  Nginx  │  反向代理 + SSL
                       └────┬────┘
                   ┌────────┼────────┐
                   ▼                 ▼
            ┌────────────┐   ┌─────────────────┐
            │ Web 前端    │   │ OpenClaw Gateway │
            │ :3000      │   │ :18789 (WS)     │
            │ (含审核台)  │   └────────┬────────┘
            └────────────┘            │
                          ┌───────┬───┼────┬──────┬───────┐
                          ▼       ▼   ▼    ▼      ▼       ▼
                       ┌─────┐┌─────┐┌──┐┌─────┐┌─────┐┌─────┐
                       │Crawl││Clean││整合││Anal││Eval ││Repo │
                       │     ││     ││🆕 ││    ││ +审核││rt   │
                       └──┬──┘└─────┘└──┘└─────┘└─────┘└──┬──┘
                          │                                │
                          ▼                                ▼
                   ┌─────────────┐                  ┌───────────┐
                   │ wechat-     │                  │ Screenshot│
                   │ exporter    │                  │ MCP Server│
                   │ :3100       │                  │ (Playwr.) │
                   └─────────────┘                  └───────────┘

                    ┌──────────────────────────────────────┐
                    │           数据存储层                    │
                    │  PostgreSQL  │  Redis  │  Meilisearch │
                    │   :5432     │  :6379  │    :7700     │
                    └──────────────────────────────────────┘
```

---

## 六、数据流全链路

```
微信公众号 / RSS 源
    │
    ▼ (wechat-article-exporter API)
[Crawler Agent] ────采集原始文章──────────▶ raw_articles 表
    │
    │ Agent Send
    ▼
[Cleaner Agent] ────投融资专项提取────────▶ cleaned_articles 表
    │               + 云&AI 分类+实体抽取       + Meilisearch 索引
    │               + 融资轮次/金额/投资方
    │               + 创始人/团队背景线索
    │               ┊
    │               ┊ 投融资字段不完整？
    │               ┊──→ 立即调用投融资数据 MCP 补充
    │               ┊    (IT桔子/天眼查/企查查)
    │
    │ Agent Send (附完整度评分)
    ▼
[Integrator Agent] ──深度信息补充──────▶ integration_logs 表
    │                 (仅处理 < 0.7 的)     更新 cleaned_articles
    │
    │  补充优先级：
    │  ① 投融资数据 MCP → 融资详情/投资方
    │  ② 企业信息 MCP   → 创始人/股东/工商
    │  ③ 学术搜索 MCP   → 核心团队论文/引用
    │  ④ 历史文章库     → 交叉引用融合
    │  ⑤ 互联网搜索     → 市场/竞品/其他
    │
    │ Agent Send (完整信息卡)
    ▼
[Analyst Agent] ────七维商机分析────────▶ opportunities 表 (初始)
    │                                      status = pending_evaluation
    │  按七大维度逐一分析：
    │  ① 公司做什么   ② 潜力如何
    │  ③ 行业影响     ④ 融资逻辑
    │  ⑤ 创始人背景   ⑥ 核心技术/论文
    │  ⑦ 是否明星团队
    │
    │ Agent Send
    ▼
[Evaluator Agent] ──七维评分+S/A/B/C──▶ opportunities 表 (更新评分)
    │                重要性排名                 status = pending_review
    │                特殊标记:                  review_queue 表
    │                🏴技术黑马 💰资本宠儿 ⭐全能选手
    │
    ▼ (前端 WebSocket 推送)
┌──────────────────────────────┐
│  👤 人工审核台                 │
│  S/A 级: 逐条审核 (< 30秒)   │
│  B/C 级: 批量处理/自动通过    │
│  操作: 通过 / 调级 / 驳回     │
└──────────────┬───────────────┘
               │
               │ 审核通过
               ▼
[Reporter Agent] ──图文混排报告──────▶ reports 表
                   - Mermaid 流程图         HTML + PDF 双格式
                   - Browser 产品截图
                   - ECharts 数据图表
                   - 图文混排合成
```

---

## 七、关键技术决策

| 决策点 | 选择 | 理由 |
|--------|------|------|
| 智能体框架 | OpenClaw | 原生多 Agent 支持、Skills/MCP 生态、Gateway 架构成熟 |
| 文章采集 | wechat-article-exporter | 开源成熟、Docker 部署、支持多格式导出 |
| LLM 模型 | Claude / GPT-4o | 商机分析需要强推理能力 |
| 工作流编排 | OpenProse | Markdown-first，与 OpenClaw 原生集成，支持人工审批节点 |
| 前端 | Next.js + shadcn/ui | SSR 性能好、组件生态丰富 |
| 搜索 | Meilisearch | 轻量级、中文支持好、毫秒级响应 |
| 数据库 | PostgreSQL + JSONB | 结构化 + 半结构化数据兼顾 |
| 流程图 | Mermaid CLI | 代码即图表、LLM 生成友好、支持多种图表类型 |
| 截图 | Playwright | 跨浏览器支持、自动化能力强、可 Docker 部署 |
| PDF 渲染 | Puppeteer | HTML → PDF 高保真转换 |

---

## 八、扩展能力

1. **更多数据源**：通过新增 Skills 扩展到知乎、头条、即刻等平台
2. **领域扩展**：当前聚焦云 & AI，后续可通过替换 classifier/detector Skills 扩展到其他赛道
3. **审核效率**：积累审核数据后训练分类模型，提高自动通过率，减少人工介入
4. **AI 对话**：集成 OpenClaw WebChat，用户可与 Agent 对话式探索商机
5. **自动化行动**：发现高价值商机后自动触发 CRM 录入、会议预约等
6. **报告模板**：支持用户自定义报告模板，按不同受众（CEO/产品/技术）生成不同侧重的报告
